(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();const E={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return Cn(this.context.count)},getNextContextId(){return Cn(this.context.count++)}};function Cn(t){const e=String(t),n=e.length-1;return E.context.id+(n?String.fromCharCode(96+n):"")+e}function ur(t){E.context=t}const fr=!1,dr=(t,e)=>t===e,We=Symbol("solid-proxy"),Kn=typeof Proxy=="function",hr=Symbol("solid-track"),ft={equals:dr};let Gn=ns;const ae=1,dt=2,Qn={owned:null,cleanups:null,context:null,owner:null},It={};var O=null;let Et=null,pr=null,P=null,z=null,ce=null,Rt=0;function Fe(t,e){const n=P,s=O,r=t.length===0,i=e===void 0?s:e,o=r?Qn:{owned:null,cleanups:null,context:i?i.context:null,owner:i},l=r?t:()=>t(()=>H(()=>ze(o)));O=o,P=null;try{return ie(l,!0)}finally{P=n,O=s}}function M(t,e){e=e?Object.assign({},ft,e):ft;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),ts(n,r));return[es.bind(n),s]}function mr(t,e,n){const s=vt(t,e,!0,ae);Ue(s)}function G(t,e,n){const s=vt(t,e,!1,ae);Ue(s)}function Je(t,e,n){Gn=Rr;const s=vt(t,e,!1,ae);s.user=!0,ce?ce.push(s):Ue(s)}function T(t,e,n){n=n?Object.assign({},ft,n):ft;const s=vt(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,Ue(s),es.bind(s)}function yr(t){return t&&typeof t=="object"&&"then"in t}function vn(t,e,n){let s,r,i;typeof e=="function"?(s=t,r=e,i={}):(s=!0,r=t,i=e||{});let o=null,l=It,c=null,a=!1,u="initialValue"in i,f=typeof s=="function"&&T(s);const d=new Set,[h,m]=(i.storage||M)(i.initialValue),[p,w]=M(void 0),[x,y]=M(void 0,{equals:!1}),[S,C]=M(u?"ready":"unresolved");E.context&&(c=E.getNextContextId(),i.ssrLoadFrom==="initial"?l=i.initialValue:E.load&&E.has(c)&&(l=E.load(c)));function v(A,b,R,B){return o===A&&(o=null,B!==void 0&&(u=!0),(A===l||b===l)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(B,{value:b})),l=It,U(b,R)),b}function U(A,b){ie(()=>{b===void 0&&m(()=>A),C(b!==void 0?"errored":u?"ready":"unresolved"),w(b);for(const R of d.keys())R.decrement();d.clear()},!1)}function Q(){const A=_r,b=h(),R=p();if(R!==void 0&&!o)throw R;return P&&P.user,b}function N(A=!0){if(A!==!1&&a)return;a=!1;const b=f?f():s;if(b==null||b===!1){v(o,H(h));return}const R=l!==It?l:H(()=>r(b,{value:h(),refetching:A}));return yr(R)?(o=R,"value"in R?(R.status==="success"?v(o,R.value,void 0,b):v(o,void 0,Tt(R.value),b),R):(a=!0,queueMicrotask(()=>a=!1),ie(()=>{C(u?"refreshing":"pending"),y()},!1),R.then(B=>v(R,B,void 0,b),B=>v(R,void 0,Tt(B),b)))):(v(o,R,void 0,b),R)}return Object.defineProperties(Q,{state:{get:()=>S()},error:{get:()=>p()},loading:{get(){const A=S();return A==="pending"||A==="refreshing"}},latest:{get(){if(!u)return Q();const A=p();if(A&&!o)throw A;return h()}}}),f?mr(()=>N(!1)):N(!1),[Q,{refetch:N,mutate:m}]}function wr(t){return ie(t,!1)}function H(t){if(P===null)return t();const e=P;P=null;try{return t()}finally{P=e}}function tn(t,e,n){const s=Array.isArray(t);let r,i=n&&n.defer;return o=>{let l;if(s){l=Array(t.length);for(let a=0;a<t.length;a++)l[a]=t[a]()}else l=t();if(i)return i=!1,o;const c=H(()=>e(l,r,o));return r=l,c}}function br(t){Je(()=>H(t))}function nn(t){return O===null||(O.cleanups===null?O.cleanups=[t]:O.cleanups.push(t)),t}function Yn(){return O}function Zn(t,e){const n=O,s=P;O=t,P=null;try{return ie(e,!0)}catch(r){rn(r)}finally{O=n,P=s}}function gr(t){const e=P,n=O;return Promise.resolve().then(()=>{P=e,O=n;let s;return ie(t,!1),P=O=null,s?s.done:void 0})}const[Bc,Dc]=M(!1);function Xn(t,e){const n=Symbol("context");return{id:n,Provider:Cr(n),defaultValue:t}}function sn(t){let e;return O&&O.context&&(e=O.context[t.id])!==void 0?e:t.defaultValue}function Ct(t){const e=T(t),n=T(()=>Ut(e()));return n.toArray=()=>{const s=n();return Array.isArray(s)?s:s!=null?[s]:[]},n}let _r;function es(){if(this.sources&&this.state)if(this.state===ae)Ue(this);else{const t=z;z=null,ie(()=>pt(this),!1),z=t}if(P){const t=this.observers?this.observers.length:0;P.sources?(P.sources.push(this),P.sourceSlots.push(t)):(P.sources=[this],P.sourceSlots=[t]),this.observers?(this.observers.push(P),this.observerSlots.push(P.sources.length-1)):(this.observers=[P],this.observerSlots=[P.sources.length-1])}return this.value}function ts(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&ie(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],o=Et&&Et.running;o&&Et.disposed.has(i),(o?!i.tState:!i.state)&&(i.pure?z.push(i):ce.push(i),i.observers&&ss(i)),o||(i.state=ae)}if(z.length>1e6)throw z=[],new Error},!1)),e}function Ue(t){if(!t.fn)return;ze(t);const e=Rt;Sr(t,t.value,e)}function Sr(t,e,n){let s;const r=O,i=P;P=O=t;try{s=t.fn(e)}catch(o){return t.pure&&(t.state=ae,t.owned&&t.owned.forEach(ze),t.owned=null),t.updatedAt=n+1,rn(o)}finally{P=i,O=r}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?ts(t,s):t.value=s,t.updatedAt=n)}function vt(t,e,n,s=ae,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:O,context:O?O.context:null,pure:n};return O===null||O!==Qn&&(O.owned?O.owned.push(i):O.owned=[i]),i}function ht(t){if(t.state===0)return;if(t.state===dt)return pt(t);if(t.suspense&&H(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<Rt);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===ae)Ue(t);else if(t.state===dt){const s=z;z=null,ie(()=>pt(t,e[0]),!1),z=s}}function ie(t,e){if(z)return t();let n=!1;e||(z=[]),ce?n=!0:ce=[],Rt++;try{const s=t();return xr(n),s}catch(s){n||(ce=null),z=null,rn(s)}}function xr(t){if(z&&(ns(z),z=null),t)return;const e=ce;ce=null,e.length&&ie(()=>Gn(e),!1)}function ns(t){for(let e=0;e<t.length;e++)ht(t[e])}function Rr(t){let e,n=0;for(e=0;e<t.length;e++){const s=t[e];s.user?t[n++]=s:ht(s)}if(E.context){if(E.count){E.effects||(E.effects=[]),E.effects.push(...t.slice(0,n));return}ur()}for(E.effects&&(E.done||!E.count)&&(t=[...E.effects,...t],n+=E.effects.length,delete E.effects),e=0;e<n;e++)ht(t[e])}function pt(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===ae?s!==e&&(!s.updatedAt||s.updatedAt<Rt)&&ht(s):r===dt&&pt(s,e)}}}function ss(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=dt,n.pure?z.push(n):ce.push(n),n.observers&&ss(n))}}function ze(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),o=n.observerSlots.pop();s<r.length&&(i.sourceSlots[o]=s,r[s]=i,n.observerSlots[s]=o)}}if(t.tOwned){for(e=t.tOwned.length-1;e>=0;e--)ze(t.tOwned[e]);delete t.tOwned}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ze(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Tt(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function rn(t,e=O){throw Tt(t)}function Ut(t){if(typeof t=="function"&&!t.length)return Ut(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const s=Ut(t[n]);Array.isArray(s)?e.push.apply(e,s):e.push(s)}return e}return t}function Cr(t,e){return function(s){let r;return G(()=>r=H(()=>(O.context={...O.context,[t]:s.value},Ct(()=>s.children))),void 0),r}}const vr=Symbol("fallback");function qn(t){for(let e=0;e<t.length;e++)t[e]()}function qr(t,e,n={}){let s=[],r=[],i=[],o=0,l=e.length>1?[]:null;return nn(()=>qn(i)),()=>{let c=t()||[],a=c.length,u,f;return c[hr],H(()=>{let h,m,p,w,x,y,S,C,v;if(a===0)o!==0&&(qn(i),i=[],s=[],r=[],o=0,l&&(l=[])),n.fallback&&(s=[vr],r[0]=Fe(U=>(i[0]=U,n.fallback())),o=1);else if(o===0){for(r=new Array(a),f=0;f<a;f++)s[f]=c[f],r[f]=Fe(d);o=a}else{for(p=new Array(a),w=new Array(a),l&&(x=new Array(a)),y=0,S=Math.min(o,a);y<S&&s[y]===c[y];y++);for(S=o-1,C=a-1;S>=y&&C>=y&&s[S]===c[C];S--,C--)p[C]=r[S],w[C]=i[S],l&&(x[C]=l[S]);for(h=new Map,m=new Array(C+1),f=C;f>=y;f--)v=c[f],u=h.get(v),m[f]=u===void 0?-1:u,h.set(v,f);for(u=y;u<=S;u++)v=s[u],f=h.get(v),f!==void 0&&f!==-1?(p[f]=r[u],w[f]=i[u],l&&(x[f]=l[u]),f=m[f],h.set(v,f)):i[u]();for(f=y;f<a;f++)f in p?(r[f]=p[f],i[f]=w[f],l&&(l[f]=x[f],l[f](f))):r[f]=Fe(d);r=r.slice(0,o=a),s=c.slice(0)}return r});function d(h){if(i[f]=h,l){const[m,p]=M(f);return l[f]=p,e(c[f],m)}return e(c[f])}}}function g(t,e){return H(()=>t(e||{}))}function nt(){return!0}const Nt={get(t,e,n){return e===We?n:t.get(e)},has(t,e){return e===We?!0:t.has(e)},set:nt,deleteProperty:nt,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:nt,deleteProperty:nt}},ownKeys(t){return t.keys()}};function Ot(t){return(t=typeof t=="function"?t():t)?t:{}}function Ar(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function Mt(...t){let e=!1;for(let o=0;o<t.length;o++){const l=t[o];e=e||!!l&&We in l,t[o]=typeof l=="function"?(e=!0,T(l)):l}if(Kn&&e)return new Proxy({get(o){for(let l=t.length-1;l>=0;l--){const c=Ot(t[l])[o];if(c!==void 0)return c}},has(o){for(let l=t.length-1;l>=0;l--)if(o in Ot(t[l]))return!0;return!1},keys(){const o=[];for(let l=0;l<t.length;l++)o.push(...Object.keys(Ot(t[l])));return[...new Set(o)]}},Nt);const n={},s=Object.create(null);for(let o=t.length-1;o>=0;o--){const l=t[o];if(!l)continue;const c=Object.getOwnPropertyNames(l);for(let a=c.length-1;a>=0;a--){const u=c[a];if(u==="__proto__"||u==="constructor")continue;const f=Object.getOwnPropertyDescriptor(l,u);if(!s[u])s[u]=f.get?{enumerable:!0,configurable:!0,get:Ar.bind(n[u]=[f.get.bind(l)])}:f.value!==void 0?f:void 0;else{const d=n[u];d&&(f.get?d.push(f.get.bind(l)):f.value!==void 0&&d.push(()=>f.value))}}}const r={},i=Object.keys(s);for(let o=i.length-1;o>=0;o--){const l=i[o],c=s[l];c&&c.get?Object.defineProperty(r,l,c):r[l]=c?c.value:void 0}return r}function $r(t,...e){if(Kn&&We in t){const r=new Set(e.length>1?e.flat():e[0]),i=e.map(o=>new Proxy({get(l){return o.includes(l)?t[l]:void 0},has(l){return o.includes(l)&&l in t},keys(){return o.filter(l=>l in t)}},Nt));return i.push(new Proxy({get(o){return r.has(o)?void 0:t[o]},has(o){return r.has(o)?!1:o in t},keys(){return Object.keys(t).filter(o=>!r.has(o))}},Nt)),i}const n={},s=e.map(()=>({}));for(const r of Object.getOwnPropertyNames(t)){const i=Object.getOwnPropertyDescriptor(t,r),o=!i.get&&!i.set&&i.enumerable&&i.writable&&i.configurable;let l=!1,c=0;for(const a of e)a.includes(r)&&(l=!0,o?s[c][r]=i.value:Object.defineProperty(s[c],r,i)),++c;l||(o?n[r]=i.value:Object.defineProperty(n,r,i))}return[...s,n]}let Ir=0;function Er(){return E.context?E.getNextContextId():`cl-${Ir++}`}const rs=t=>`Stale read from <${t}>.`;function he(t){const e="fallback"in t&&{fallback:()=>t.fallback};return T(qr(()=>t.each,t.children,e||void 0))}function Y(t){const e=t.keyed,n=T(()=>t.when,void 0,void 0),s=e?n:T(n,void 0,{equals:(r,i)=>!r==!i});return T(()=>{const r=s();if(r){const i=t.children;return typeof i=="function"&&i.length>0?H(()=>i(e?r:()=>{if(!H(s))throw rs("Show");return n()})):i}return t.fallback},void 0,void 0)}function st(t){const e=Ct(()=>t.children),n=T(()=>{const s=e(),r=Array.isArray(s)?s:[s];let i=()=>{};for(let o=0;o<r.length;o++){const l=o,c=r[o],a=i,u=T(()=>a()?void 0:c.when,void 0,void 0),f=c.keyed?u:T(u,void 0,{equals:(d,h)=>!d==!h});i=()=>a()||(f()?[l,u,c]:void 0)}return i});return T(()=>{const s=n()();if(!s)return t.fallback;const[r,i,o]=s,l=o.children;return typeof l=="function"&&l.length>0?H(()=>l(o.keyed?i():()=>{if(H(n)()?.[0]!==r)throw rs("Match");return i()})):l},void 0,void 0)}function X(t){return t}const Or=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],kr=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Or]),Pr=new Set(["innerHTML","textContent","innerText","children"]),Lr=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Tr=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Ur(t,e){const n=Tr[t];return typeof n=="object"?n[e]?n.$:void 0:n}const Nr=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]);function Mr(t,e,n){let s=n.length,r=e.length,i=s,o=0,l=0,c=e[r-1].nextSibling,a=null;for(;o<r||l<i;){if(e[o]===n[l]){o++,l++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===o){const u=i<s?l?n[l-1].nextSibling:n[i-l]:c;for(;l<i;)t.insertBefore(n[l++],u)}else if(i===l)for(;o<r;)(!a||!a.has(e[o]))&&e[o].remove(),o++;else if(e[o]===n[i-1]&&n[l]===e[r-1]){const u=e[--r].nextSibling;t.insertBefore(n[l++],e[o++].nextSibling),t.insertBefore(n[--i],u),e[r]=n[i]}else{if(!a){a=new Map;let f=l;for(;f<i;)a.set(n[f],f++)}const u=a.get(e[o]);if(u!=null)if(l<u&&u<i){let f=o,d=1,h;for(;++f<r&&f<i&&!((h=a.get(e[f]))==null||h!==u+d);)d++;if(d>u-l){const m=e[o];for(;l<u;)t.insertBefore(n[l++],m)}else t.replaceChild(n[l++],e[o++])}else o++;else e[o++].remove()}}}const An="_$DX_DELEGATE";function Br(t,e,n,s={}){let r;return Fe(i=>{r=i,e===document?t():_(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function k(t,e,n,s){let r;const i=()=>{const l=document.createElement("template");return l.innerHTML=t,l.content.firstChild},o=()=>(r||(r=i())).cloneNode(!0);return o.cloneNode=o,o}function on(t,e=window.document){const n=e[An]||(e[An]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,Jr))}}function mt(t,e,n){Ze(t)||(n==null?t.removeAttribute(e):t.setAttribute(e,n))}function Dr(t,e,n){Ze(t)||(n?t.setAttribute(e,""):t.removeAttribute(e))}function yt(t,e){Ze(t)||(e==null?t.removeAttribute("class"):t.className=e)}function Ee(t,e,n,s){if(s)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const r=n[0];t.addEventListener(e,n[0]=i=>r.call(t,n[1],i))}else t.addEventListener(e,n,typeof n!="function"&&n)}function jr(t,e,n={}){const s=Object.keys(e||{}),r=Object.keys(n);let i,o;for(i=0,o=r.length;i<o;i++){const l=r[i];!l||l==="undefined"||e[l]||($n(t,l,!1),delete n[l])}for(i=0,o=s.length;i<o;i++){const l=s[i],c=!!e[l];!l||l==="undefined"||n[l]===c||!c||($n(t,l,!0),n[l]=c)}return n}function Fr(t,e,n){if(!e)return n?mt(t,"style"):e;const s=t.style;if(typeof e=="string")return s.cssText=e;typeof n=="string"&&(s.cssText=n=void 0),n||(n={}),e||(e={});let r,i;for(i in n)e[i]==null&&s.removeProperty(i),delete n[i];for(i in e)r=e[i],r!==n[i]&&(s.setProperty(i,r),n[i]=r);return n}function Vr(t,e={},n,s){const r={};return G(()=>r.children=Ke(t,e.children,r.children)),G(()=>typeof e.ref=="function"&&Bt(e.ref,t)),G(()=>Hr(t,e,n,!0,r,!0)),r}function Bt(t,e,n){return H(()=>t(e,n))}function _(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return Ke(t,e,s,n);G(r=>Ke(t,e(),r,n),s)}function Hr(t,e,n,s,r={},i=!1){e||(e={});for(const o in r)if(!(o in e)){if(o==="children")continue;r[o]=In(t,o,null,r[o],n,i,e)}for(const o in e){if(o==="children")continue;const l=e[o];r[o]=In(t,o,l,r[o],n,i,e)}}function Ze(t){return!!E.context&&!E.done&&(!t||t.isConnected)}function Wr(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function $n(t,e,n){const s=e.trim().split(/\s+/);for(let r=0,i=s.length;r<i;r++)t.classList.toggle(s[r],n)}function In(t,e,n,s,r,i,o){let l,c,a,u,f;if(e==="style")return Fr(t,n,s);if(e==="classList")return jr(t,n,s);if(n===s)return s;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const d=e.slice(3);s&&t.removeEventListener(d,s,typeof s!="function"&&s),n&&t.addEventListener(d,n,typeof n!="function"&&n)}else if(e.slice(0,10)==="oncapture:"){const d=e.slice(10);s&&t.removeEventListener(d,s,!0),n&&t.addEventListener(d,n,!0)}else if(e.slice(0,2)==="on"){const d=e.slice(2).toLowerCase(),h=Nr.has(d);if(!h&&s){const m=Array.isArray(s)?s[0]:s;t.removeEventListener(d,m)}(h||n)&&(Ee(t,d,n,h),h&&on([d]))}else if(e.slice(0,5)==="attr:")mt(t,e.slice(5),n);else if(e.slice(0,5)==="bool:")Dr(t,e.slice(5),n);else if((f=e.slice(0,5)==="prop:")||(a=Pr.has(e))||(u=Ur(e,t.tagName))||(c=kr.has(e))||(l=t.nodeName.includes("-")||"is"in o)){if(f)e=e.slice(5),c=!0;else if(Ze(t))return n;e==="class"||e==="className"?yt(t,n):l&&!c&&!a?t[Wr(e)]=n:t[u||e]=n}else mt(t,Lr[e]||e,n);return n}function Jr(t){if(E.registry&&E.events&&E.events.find(([c,a])=>a===t))return;let e=t.target;const n=`$$${t.type}`,s=t.target,r=t.currentTarget,i=c=>Object.defineProperty(t,"target",{configurable:!0,value:c}),o=()=>{const c=e[n];if(c&&!e.disabled){const a=e[`${n}Data`];if(a!==void 0?c.call(e,a,t):c.call(e,t),t.cancelBubble)return}return e.host&&typeof e.host!="string"&&!e.host._$host&&e.contains(t.target)&&i(e.host),!0},l=()=>{for(;o()&&(e=e._$host||e.parentNode||e.host););};if(Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return e||document}}),E.registry&&!E.done&&(E.done=_$HY.done=!0),t.composedPath){const c=t.composedPath();i(c[0]);for(let a=0;a<c.length-2&&(e=c[a],!!o());a++){if(e._$host){e=e._$host,l();break}if(e.parentNode===r)break}}else l();i(s)}function Ke(t,e,n,s,r){const i=Ze(t);if(i){!n&&(n=[...t.childNodes]);let c=[];for(let a=0;a<n.length;a++){const u=n[a];u.nodeType===8&&u.data.slice(0,2)==="!$"?u.remove():c.push(u)}n=c}for(;typeof n=="function";)n=n();if(e===n)return n;const o=typeof e,l=s!==void 0;if(t=l&&n[0]&&n[0].parentNode||t,o==="string"||o==="number"){if(i||o==="number"&&(e=e.toString(),e===n))return n;if(l){let c=n[0];c&&c.nodeType===3?c.data!==e&&(c.data=e):c=document.createTextNode(e),n=ve(t,n,s,c)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e}else if(e==null||o==="boolean"){if(i)return n;n=ve(t,n,s)}else{if(o==="function")return G(()=>{let c=e();for(;typeof c=="function";)c=c();n=Ke(t,c,n,s)}),()=>n;if(Array.isArray(e)){const c=[],a=n&&Array.isArray(n);if(Dt(c,e,n,r))return G(()=>n=Ke(t,c,n,s,!0)),()=>n;if(i){if(!c.length)return n;if(s===void 0)return n=[...t.childNodes];let u=c[0];if(u.parentNode!==t)return n;const f=[u];for(;(u=u.nextSibling)!==s;)f.push(u);return n=f}if(c.length===0){if(n=ve(t,n,s),l)return n}else a?n.length===0?En(t,c,s):Mr(t,n,c):(n&&ve(t),En(t,c));n=c}else if(e.nodeType){if(i&&e.parentNode)return n=l?[e]:e;if(Array.isArray(n)){if(l)return n=ve(t,n,s,e);ve(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function Dt(t,e,n,s){let r=!1;for(let i=0,o=e.length;i<o;i++){let l=e[i],c=n&&n[t.length],a;if(!(l==null||l===!0||l===!1))if((a=typeof l)=="object"&&l.nodeType)t.push(l);else if(Array.isArray(l))r=Dt(t,l,c)||r;else if(a==="function")if(s){for(;typeof l=="function";)l=l();r=Dt(t,Array.isArray(l)?l:[l],Array.isArray(c)?c:[c])||r}else t.push(l),r=!0;else{const u=String(l);c&&c.nodeType===3&&c.data===u?t.push(c):t.push(document.createTextNode(u))}}return r}function En(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function ve(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let o=e.length-1;o>=0;o--){const l=e[o];if(r!==l){const c=l.parentNode===t;!i&&!o?c?t.replaceChild(r,l):t.insertBefore(r,n):c&&l.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}const zr=!1;function is(){let t=new Set;function e(r){return t.add(r),()=>t.delete(r)}let n=!1;function s(r,i){if(n)return!(n=!1);const o={to:r,options:i,defaultPrevented:!1,preventDefault:()=>o.defaultPrevented=!0};for(const l of t)l.listener({...o,from:l.location,retry:c=>{c&&(n=!0),l.navigate(r,{...i,resolve:!1})}});return!o.defaultPrevented}return{subscribe:e,confirm:s}}let jt;function ln(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),jt=window.history.state._depth}ln();function Kr(t){return{...t,_depth:window.history.state&&window.history.state._depth}}function Gr(t,e){let n=!1;return()=>{const s=jt;ln();const r=s==null?null:jt-s;if(n){n=!1;return}r&&e(r)?(n=!0,window.history.go(-r)):t()}}const Qr=/^(?:[a-z0-9]+:)?\/\//i,Yr=/^\/+|(\/)\/+$/g,os="http://sr";function ge(t,e=!1){const n=t.replace(Yr,"$1");return n?e||/^[?#]/.test(n)?n:"/"+n:""}function lt(t,e,n){if(Qr.test(e))return;const s=ge(t),r=n&&ge(n);let i="";return!r||e.startsWith("/")?i=s:r.toLowerCase().indexOf(s.toLowerCase())!==0?i=s+r:i=r,(i||"/")+ge(e,!i)}function Zr(t,e){if(t==null)throw new Error(e);return t}function Xr(t,e){return ge(t).replace(/\/*(\*.*)?$/g,"")+ge(e)}function ls(t){const e={};return t.searchParams.forEach((n,s)=>{s in e?Array.isArray(e[s])?e[s].push(n):e[s]=[e[s],n]:e[s]=n}),e}function ei(t,e,n){const[s,r]=t.split("/*",2),i=s.split("/").filter(Boolean),o=i.length;return l=>{const c=l.split("/").filter(Boolean),a=c.length-o;if(a<0||a>0&&r===void 0&&!e)return null;const u={path:o?"":"/",params:{}},f=d=>n===void 0?void 0:n[d];for(let d=0;d<o;d++){const h=i[d],m=h[0]===":",p=m?c[d]:c[d].toLowerCase(),w=m?h.slice(1):h.toLowerCase();if(m&&kt(p,f(w)))u.params[w]=p;else if(m||!kt(p,w))return null;u.path+=`/${p}`}if(r){const d=a?c.slice(-a).join("/"):"";if(kt(d,f(r)))u.params[r]=d;else return null}return u}}function kt(t,e){const n=s=>s===t;return e===void 0?!0:typeof e=="string"?n(e):typeof e=="function"?e(t):Array.isArray(e)?e.some(n):e instanceof RegExp?e.test(t):!1}function ti(t){const[e,n]=t.pattern.split("/*",2),s=e.split("/").filter(Boolean);return s.reduce((r,i)=>r+(i.startsWith(":")?2:3),s.length-(n===void 0?0:1))}function cs(t){const e=new Map,n=Yn();return new Proxy({},{get(s,r){return e.has(r)||Zn(n,()=>e.set(r,T(()=>t()[r]))),e.get(r)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(t())}})}function as(t){let e=/(\/?\:[^\/]+)\?/.exec(t);if(!e)return[t];let n=t.slice(0,e.index),s=t.slice(e.index+e[0].length);const r=[n,n+=e[1]];for(;e=/^(\/\:[^\/]+)\?/.exec(s);)r.push(n+=e[1]),s=s.slice(e[0].length);return as(s).reduce((i,o)=>[...i,...r.map(l=>l+o)],[])}const ni=100,us=Xn(),cn=Xn(),an=()=>Zr(sn(us),"<A> and 'use' router primitives can be only used inside a Route."),si=()=>sn(cn)||an().base,ri=t=>{const e=si();return T(()=>e.resolvePath(t()))},ii=t=>{const e=an();return T(()=>{const n=t();return n!==void 0?e.renderPath(n):n})},oi=()=>an().location;function li(t,e=""){const{component:n,preload:s,load:r,children:i,info:o}=t,l=!i||Array.isArray(i)&&!i.length,c={key:t,component:n,preload:s||r,info:o};return fs(t.path).reduce((a,u)=>{for(const f of as(u)){const d=Xr(e,f);let h=l?d:d.split("/*",1)[0];h=h.split("/").map(m=>m.startsWith(":")||m.startsWith("*")?m:encodeURIComponent(m)).join("/"),a.push({...c,originalPath:u,pattern:h,matcher:ei(h,!l,t.matchFilters)})}return a},[])}function ci(t,e=0){return{routes:t,score:ti(t[t.length-1])*1e4-e,matcher(n){const s=[];for(let r=t.length-1;r>=0;r--){const i=t[r],o=i.matcher(n);if(!o)return null;s.unshift({...o,route:i})}return s}}}function fs(t){return Array.isArray(t)?t:[t]}function ds(t,e="",n=[],s=[]){const r=fs(t);for(let i=0,o=r.length;i<o;i++){const l=r[i];if(l&&typeof l=="object"){l.hasOwnProperty("path")||(l.path="");const c=li(l,e);for(const a of c){n.push(a);const u=Array.isArray(l.children)&&l.children.length===0;if(l.children&&!u)ds(l.children,a.pattern,n,s);else{const f=ci([...n],s.length);s.push(f)}n.pop()}}}return n.length?s:s.sort((i,o)=>o.score-i.score)}function Pt(t,e){for(let n=0,s=t.length;n<s;n++){const r=t[n].matcher(e);if(r)return r}return[]}function ai(t,e,n){const s=new URL(os),r=T(u=>{const f=t();try{return new URL(f,s)}catch{return console.error(`Invalid path ${f}`),u}},s,{equals:(u,f)=>u.href===f.href}),i=T(()=>r().pathname),o=T(()=>r().search,!0),l=T(()=>r().hash),c=()=>"",a=tn(o,()=>ls(r()));return{get pathname(){return i()},get search(){return o()},get hash(){return l()},get state(){return e()},get key(){return c()},query:n?n(a):cs(a)}}let be;function ui(){return be}function fi(t,e,n,s={}){const{signal:[r,i],utils:o={}}=t,l=o.parsePath||(I=>I),c=o.renderPath||(I=>I),a=o.beforeLeave||is(),u=lt("",s.base||"");if(u===void 0)throw new Error(`${u} is not a valid base path`);u&&!r().value&&i({value:u,replace:!0,scroll:!1});const[f,d]=M(!1);let h;const m=(I,$)=>{$.value===p()&&$.state===x()||(h===void 0&&d(!0),be=I,h=$,gr(()=>{h===$&&(w(h.value),y(h.state),v[1](V=>V.filter(te=>te.pending)))}).finally(()=>{h===$&&wr(()=>{be=void 0,I==="navigate"&&B(h),d(!1),h=void 0})}))},[p,w]=M(r().value),[x,y]=M(r().state),S=ai(p,x,o.queryWrapper),C=[],v=M([]),U=T(()=>typeof s.transformUrl=="function"?Pt(e(),s.transformUrl(S.pathname)):Pt(e(),S.pathname)),Q=()=>{const I=U(),$={};for(let V=0;V<I.length;V++)Object.assign($,I[V].params);return $},N=o.paramsWrapper?o.paramsWrapper(Q,e):cs(Q),A={pattern:u,path:()=>u,outlet:()=>null,resolvePath(I){return lt(u,I)}};return G(tn(r,I=>m("native",I),{defer:!0})),{base:A,location:S,params:N,isRouting:f,renderPath:c,parsePath:l,navigatorFactory:R,matches:U,beforeLeave:a,preloadRoute:ue,singleFlight:s.singleFlight===void 0?!0:s.singleFlight,submissions:v};function b(I,$,V){H(()=>{if(typeof $=="number"){$&&(o.go?o.go($):console.warn("Router integration does not support relative routing"));return}const te=!$||$[0]==="?",{replace:Re,resolve:Z,scroll:le,state:fe}={replace:!1,resolve:!te,scroll:!0,...V},Ce=Z?I.resolvePath($):lt(te&&S.pathname||"",$);if(Ce===void 0)throw new Error(`Path '${$}' is not a routable path`);if(C.length>=ni)throw new Error("Too many redirects");const tt=p();(Ce!==tt||fe!==x())&&(zr||a.confirm(Ce,V)&&(C.push({value:tt,replace:Re,scroll:le,state:x()}),m("navigate",{value:Ce,state:fe})))})}function R(I){return I=I||sn(cn)||A,($,V)=>b(I,$,V)}function B(I){const $=C[0];$&&(i({...I,replace:$.replace,scroll:$.scroll}),C.length=0)}function ue(I,$){const V=Pt(e(),I.pathname),te=be;be="preload";for(let Re in V){const{route:Z,params:le}=V[Re];Z.component&&Z.component.preload&&Z.component.preload();const{preload:fe}=Z;$&&fe&&Zn(n(),()=>fe({params:le,location:{pathname:I.pathname,search:I.search,hash:I.hash,query:ls(I),state:null,key:""},intent:"preload"}))}be=te}}function di(t,e,n,s){const{base:r,location:i,params:o}=t,{pattern:l,component:c,preload:a}=s().route,u=T(()=>s().path);c&&c.preload&&c.preload();const f=a?a({params:o,location:i,intent:be||"initial"}):void 0;return{parent:e,pattern:l,path:u,outlet:()=>c?g(c,{params:o,location:i,data:f,get children(){return n()}}):n(),resolvePath(h){return lt(r.path(),h,u())}}}const hi=t=>e=>{const{base:n}=e,s=Ct(()=>e.children),r=T(()=>ds(s(),e.base||""));let i;const o=fi(t,r,()=>i,{base:n,singleFlight:e.singleFlight,transformUrl:e.transformUrl});return t.create&&t.create(o),g(us.Provider,{value:o,get children(){return g(pi,{routerState:o,get root(){return e.root},get preload(){return e.rootPreload||e.rootLoad},get children(){return[T(()=>(i=Yn())&&null),g(mi,{routerState:o,get branches(){return r()}})]}})}})};function pi(t){const e=t.routerState.location,n=t.routerState.params,s=T(()=>t.preload&&H(()=>{t.preload({params:n,location:e,intent:ui()||"initial"})}));return g(Y,{get when(){return t.root},keyed:!0,get fallback(){return t.children},children:r=>g(r,{params:n,location:e,get data(){return s()},get children(){return t.children}})})}function mi(t){const e=[];let n;const s=T(tn(t.routerState.matches,(r,i,o)=>{let l=i&&r.length===i.length;const c=[];for(let a=0,u=r.length;a<u;a++){const f=i&&i[a],d=r[a];o&&f&&d.route.key===f.route.key?c[a]=o[a]:(l=!1,e[a]&&e[a](),Fe(h=>{e[a]=h,c[a]=di(t.routerState,c[a-1]||t.routerState.base,On(()=>s()[a+1]),()=>t.routerState.matches()[a])}))}return e.splice(r.length).forEach(a=>a()),o&&l?o:(n=c[0],c)}));return On(()=>s()&&n)()}const On=t=>()=>g(Y,{get when(){return t()},keyed:!0,children:e=>g(cn.Provider,{value:e,get children(){return e.outlet()}})}),rt=t=>{const e=Ct(()=>t.children);return Mt(t,{get children(){return e()}})};function yi([t,e],n,s){return[t,s?r=>e(s(r)):e]}function wi(t){let e=!1;const n=r=>typeof r=="string"?{value:r}:r,s=yi(M(n(t.get()),{equals:(r,i)=>r.value===i.value&&r.state===i.state}),void 0,r=>(!e&&t.set(r),E.registry&&!E.done&&(E.done=!0),r));return t.init&&nn(t.init((r=t.get())=>{e=!0,s[1](n(r)),e=!1})),hi({signal:s,create:t.create,utils:t.utils})}function bi(t,e,n){return t.addEventListener(e,n),()=>t.removeEventListener(e,n)}function gi(t,e){const n=t&&document.getElementById(t);n?n.scrollIntoView():e&&window.scrollTo(0,0)}const _i=new Map;function Si(t=!0,e=!1,n="/_server",s){return r=>{const i=r.base.path(),o=r.navigatorFactory(r.base);let l,c;function a(p){return p.namespaceURI==="http://www.w3.org/2000/svg"}function u(p){if(p.defaultPrevented||p.button!==0||p.metaKey||p.altKey||p.ctrlKey||p.shiftKey)return;const w=p.composedPath().find(U=>U instanceof Node&&U.nodeName.toUpperCase()==="A");if(!w||e&&!w.hasAttribute("link"))return;const x=a(w),y=x?w.href.baseVal:w.href;if((x?w.target.baseVal:w.target)||!y&&!w.hasAttribute("state"))return;const C=(w.getAttribute("rel")||"").split(/\s+/);if(w.hasAttribute("download")||C&&C.includes("external"))return;const v=x?new URL(y,document.baseURI):new URL(y);if(!(v.origin!==window.location.origin||i&&v.pathname&&!v.pathname.toLowerCase().startsWith(i.toLowerCase())))return[w,v]}function f(p){const w=u(p);if(!w)return;const[x,y]=w,S=r.parsePath(y.pathname+y.search+y.hash),C=x.getAttribute("state");p.preventDefault(),o(S,{resolve:!1,replace:x.hasAttribute("replace"),scroll:!x.hasAttribute("noscroll"),state:C?JSON.parse(C):void 0})}function d(p){const w=u(p);if(!w)return;const[x,y]=w;s&&(y.pathname=s(y.pathname)),r.preloadRoute(y,x.getAttribute("preload")!=="false")}function h(p){clearTimeout(l);const w=u(p);if(!w)return c=null;const[x,y]=w;c!==x&&(s&&(y.pathname=s(y.pathname)),l=setTimeout(()=>{r.preloadRoute(y,x.getAttribute("preload")!=="false"),c=x},20))}function m(p){if(p.defaultPrevented)return;let w=p.submitter&&p.submitter.hasAttribute("formaction")?p.submitter.getAttribute("formaction"):p.target.getAttribute("action");if(!w)return;if(!w.startsWith("https://action/")){const y=new URL(w,os);if(w=r.parsePath(y.pathname+y.search),!w.startsWith(n))return}if(p.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const x=_i.get(w);if(x){p.preventDefault();const y=new FormData(p.target,p.submitter);x.call({r,f:p.target},p.target.enctype==="multipart/form-data"?y:new URLSearchParams(y))}}on(["click","submit"]),document.addEventListener("click",f),t&&(document.addEventListener("mousemove",h,{passive:!0}),document.addEventListener("focusin",d,{passive:!0}),document.addEventListener("touchstart",d,{passive:!0})),document.addEventListener("submit",m),nn(()=>{document.removeEventListener("click",f),t&&(document.removeEventListener("mousemove",h),document.removeEventListener("focusin",d),document.removeEventListener("touchstart",d)),document.removeEventListener("submit",m)})}}function xi(t){const e=()=>{const s=window.location.pathname.replace(/^\/+/,"/")+window.location.search,r=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:s+window.location.hash,state:r}},n=is();return wi({get:e,set({value:s,replace:r,scroll:i,state:o}){r?window.history.replaceState(Kr(o),"",s):window.history.pushState(o,"",s),gi(decodeURIComponent(window.location.hash.slice(1)),i),ln()},init:s=>bi(window,"popstate",Gr(s,r=>{if(r&&r<0)return!n.confirm(r);{const i=e();return!n.confirm(i.value,{state:i.state})}})),create:Si(t.preload,t.explicitLinks,t.actionBase,t.transformUrl),utils:{go:s=>window.history.go(s),beforeLeave:n}})(t)}var Ri=k("<a>");function ct(t){t=Mt({inactiveClass:"inactive",activeClass:"active"},t);const[,e]=$r(t,["href","state","class","activeClass","inactiveClass","end"]),n=ri(()=>t.href),s=ii(n),r=oi(),i=T(()=>{const o=n();if(o===void 0)return[!1,!1];const l=ge(o.split(/[?#]/,1)[0]).toLowerCase(),c=decodeURI(ge(r.pathname).toLowerCase());return[t.end?l===c:c.startsWith(l+"/")||c===l,l===c]});return(()=>{var o=Ri();return Vr(o,Mt(e,{get href(){return s()||t.href},get state(){return JSON.stringify(t.state)},get classList(){return{...t.class&&{[t.class]:!0},[t.inactiveClass]:!i()[0],[t.activeClass]:i()[0],...e.classList}},link:"",get"aria-current"(){return i()[1]?"page":void 0}}),!1),o})()}const Ci=Symbol("store-raw"),vi=Symbol("store-node"),qe=Symbol("store-has"),qi=Symbol("store-self");function Ge(t){let e;return t!=null&&typeof t=="object"&&(t[We]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function Ft(t,e=new Set){let n,s,r,i;if(n=t!=null&&t[Ci])return n;if(!Ge(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let o=0,l=t.length;o<l;o++)r=t[o],(s=Ft(r,e))!==r&&(t[o]=s)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const o=Object.keys(t),l=Object.getOwnPropertyDescriptors(t);for(let c=0,a=o.length;c<a;c++)i=o[c],!l[i].get&&(r=t[i],(s=Ft(r,e))!==r&&(t[i]=s))}return t}function Ai(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function kn(t,e,n){if(t[e])return t[e];const[s,r]=M(n,{equals:!1,internal:!0});return s.$=r,t[e]=s}function de(t,e,n,s=!1){if(!s&&t[e]===n)return;const r=t[e],i=t.length;n===void 0?(delete t[e],t[qe]&&t[qe][e]&&r!==void 0&&t[qe][e].$()):(t[e]=n,t[qe]&&t[qe][e]&&r===void 0&&t[qe][e].$());let o=Ai(t,vi),l;if((l=kn(o,e,r))&&l.$(()=>n),Array.isArray(t)&&t.length!==i){for(let c=t.length;c<i;c++)(l=o[c])&&l.$();(l=kn(o,"length",i))&&l.$(t.length)}(l=o[qi])&&l.$()}const Vt=Symbol("store-root");function Ae(t,e,n,s,r){const i=e[n];if(t===i)return;const o=Array.isArray(t);if(n!==Vt&&(!Ge(t)||!Ge(i)||o!==Array.isArray(i)||r&&t[r]!==i[r])){de(e,n,t);return}if(o){if(t.length&&i.length&&(!s||r&&t[0]&&t[0][r]!=null)){let a,u,f,d,h,m,p,w;for(f=0,d=Math.min(i.length,t.length);f<d&&(i[f]===t[f]||r&&i[f]&&t[f]&&i[f][r]===t[f][r]);f++)Ae(t[f],i,f,s,r);const x=new Array(t.length),y=new Map;for(d=i.length-1,h=t.length-1;d>=f&&h>=f&&(i[d]===t[h]||r&&i[d]&&t[h]&&i[d][r]===t[h][r]);d--,h--)x[h]=i[d];if(f>h||f>d){for(u=f;u<=h;u++)de(i,u,t[u]);for(;u<t.length;u++)de(i,u,x[u]),Ae(t[u],i,u,s,r);i.length>t.length&&de(i,"length",t.length);return}for(p=new Array(h+1),u=h;u>=f;u--)m=t[u],w=r&&m?m[r]:m,a=y.get(w),p[u]=a===void 0?-1:a,y.set(w,u);for(a=f;a<=d;a++)m=i[a],w=r&&m?m[r]:m,u=y.get(w),u!==void 0&&u!==-1&&(x[u]=i[a],u=p[u],y.set(w,u));for(u=f;u<t.length;u++)u in x?(de(i,u,x[u]),Ae(t[u],i,u,s,r)):de(i,u,t[u])}else for(let a=0,u=t.length;a<u;a++)Ae(t[a],i,a,s,r);i.length>t.length&&de(i,"length",t.length);return}const l=Object.keys(t);for(let a=0,u=l.length;a<u;a++)Ae(t[l[a]],i,l[a],s,r);const c=Object.keys(i);for(let a=0,u=c.length;a<u;a++)t[c[a]]===void 0&&de(i,c[a],void 0)}function $i(t,e={}){const{merge:n,key:s="id"}=e,r=Ft(t);return i=>{if(!Ge(i)||!Ge(r))return r;const o=Ae(r,{[Vt]:i},Vt,n,s);return o===void 0?i:o}}var Ii=k('<div class="flex flex-col h-screen w-screen overflow-auto"><div class="flex w-full h-16 bg-blue-400 bg-gradient-to-b to-blue-700"><div class="flex w-full justify-center items-center text-3xl font-medium h-16">Offensive AI Ethics</div></div><div class="flex w-full bg-blue-700 bg-gradient-to-r to-blue-500 justify-center text-slate-300"><ul class="flex justify-between w-1/3"><li class=hover:text-slate-100></li><li class=hover:text-slate-100></li><li class=hover:text-slate-100></li></ul></div><main class="flex flex-1 bg-slate-50">');const Ei=t=>(()=>{var e=Ii(),n=e.firstChild,s=n.nextSibling,r=s.firstChild,i=r.firstChild,o=i.nextSibling,l=o.nextSibling,c=s.nextSibling;return _(i,g(ct,{href:"/",children:"Home"})),_(o,g(ct,{href:"/llm-results",children:"LLM Alignment Results"})),_(l,g(ct,{href:"/about",children:"About"})),_(c,()=>t.children),e})();var Oi=k('<div class="flex flex-col items-center justify-center w-full text-base-300"><h1>Something something ai</h1><button class=btn>Go to LLM Alighment Results');const ki=()=>Oi();var Pi=k(`<div class="grid h-screen w-full place-content-center bg-white px-4"><div class=text-center><h1 class="text-9xl font-black text-gray-200">404</h1><p class="text-2xl font-bold tracking-tight text-gray-900 sm:text-4xl">Uh-oh!</p><p class="mt-4 text-gray-500">We can't find that page.`);const Pn=()=>(()=>{var t=Pi(),e=t.firstChild,n=e.firstChild,s=n.nextSibling;return s.nextSibling,_(e,g(ct,{href:"/",class:"mt-6 inline-block rounded-sm bg-indigo-600 px-5 py-3 text-sm font-medium text-white hover:bg-indigo-700 focus:ring-3 focus:outline-hidden",children:"Go Back Home"}),null),t})();class L extends Error{code;rawCode;constructor(e,n,s,r){n!==void 0&&(e=`${n}: ${e}`),super(e,{cause:r}),this.code=n,this.rawCode=s,this.name="LibsqlError"}}function Li(t){const e=Ti.exec(t);if(e===null)throw new L(`The URL '${t}' is not in a valid format`,"URL_INVALID");const n=e.groups,s=n.scheme,r=n.authority!==void 0?Ui(n.authority):void 0,i=_e(n.path),o=n.query!==void 0?Mi(n.query):void 0,l=n.fragment!==void 0?_e(n.fragment):void 0;return{scheme:s,authority:r,path:i,query:o,fragment:l}}const Ti=(()=>{const t="(?<scheme>[A-Za-z][A-Za-z.+-]*)",e="(?<authority>[^/?#]*)",n="(?<path>[^?#]*)",s="(?<query>[^#]*)",r="(?<fragment>.*)";return new RegExp(`^${t}:(//${e})?${n}(\\?${s})?(#${r})?$`,"su")})();function Ui(t){const e=Ni.exec(t);if(e===null)throw new L("The authority part of the URL is not in a valid format","URL_INVALID");const n=e.groups,s=_e(n.host_br??n.host),r=n.port?parseInt(n.port,10):void 0,i=n.username!==void 0?{username:_e(n.username),password:n.password!==void 0?_e(n.password):void 0}:void 0;return{host:s,port:r,userinfo:i}}const Ni=new RegExp("^((?<username>[^:]*)(:(?<password>.*))?@)?((?<host>[^:\\[\\]]*)|(\\[(?<host_br>[^\\[\\]]*)\\]))(:(?<port>[0-9]*))?$","su");function Mi(t){const e=t.split("&"),n=[];for(const s of e){if(s==="")continue;let r,i;const o=s.indexOf("=");o<0?(r=s,i=""):(r=s.substring(0,o),i=s.substring(o+1)),n.push({key:_e(r.replaceAll("+"," ")),value:_e(i.replaceAll("+"," "))})}return{pairs:n}}function _e(t){try{return decodeURIComponent(t)}catch(e){throw e instanceof URIError?new L(`URL component has invalid percent encoding: ${e}`,"URL_INVALID",void 0,e):e}}function Ht(t,e,n){if(e===void 0)throw new L(`URL with scheme ${JSON.stringify(t+":")} requires authority (the "//" part)`,"URL_INVALID");const s=`${t}:`,r=Bi(e.host),i=Di(e.port),l=`//${ji(e.userinfo)}${r}${i}`;let c=n.split("/").map(encodeURIComponent).join("/");return c!==""&&!c.startsWith("/")&&(c="/"+c),new URL(`${s}${l}${c}`)}function Bi(t){return t.includes(":")?`[${encodeURI(t)}]`:encodeURI(t)}function Di(t){return t!==void 0?`:${t}`:""}function ji(t){if(t===void 0)return"";const e=encodeURIComponent(t.username),n=t.password!==void 0?`:${encodeURIComponent(t.password)}`:"";return`${e}${n}@`}const hs="3.7.7",Fi=hs,Ne=typeof Buffer=="function",Ln=typeof TextDecoder=="function"?new TextDecoder:void 0,Tn=typeof TextEncoder=="function"?new TextEncoder:void 0,Vi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",De=Array.prototype.slice.call(Vi),it=(t=>{let e={};return t.forEach((n,s)=>e[n]=s),e})(De),Hi=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,W=String.fromCharCode.bind(String),Un=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):t=>new Uint8Array(Array.prototype.slice.call(t,0)),ps=t=>t.replace(/=/g,"").replace(/[+\/]/g,e=>e=="+"?"-":"_"),ms=t=>t.replace(/[^A-Za-z0-9\+\/]/g,""),ys=t=>{let e,n,s,r,i="";const o=t.length%3;for(let l=0;l<t.length;){if((n=t.charCodeAt(l++))>255||(s=t.charCodeAt(l++))>255||(r=t.charCodeAt(l++))>255)throw new TypeError("invalid character found");e=n<<16|s<<8|r,i+=De[e>>18&63]+De[e>>12&63]+De[e>>6&63]+De[e&63]}return o?i.slice(0,o-3)+"===".substring(o):i},un=typeof btoa=="function"?t=>btoa(t):Ne?t=>Buffer.from(t,"binary").toString("base64"):ys,Wt=Ne?t=>Buffer.from(t).toString("base64"):t=>{let n=[];for(let s=0,r=t.length;s<r;s+=4096)n.push(W.apply(null,t.subarray(s,s+4096)));return un(n.join(""))},at=(t,e=!1)=>e?ps(Wt(t)):Wt(t),Wi=t=>{if(t.length<2){var e=t.charCodeAt(0);return e<128?t:e<2048?W(192|e>>>6)+W(128|e&63):W(224|e>>>12&15)+W(128|e>>>6&63)+W(128|e&63)}else{var e=65536+(t.charCodeAt(0)-55296)*1024+(t.charCodeAt(1)-56320);return W(240|e>>>18&7)+W(128|e>>>12&63)+W(128|e>>>6&63)+W(128|e&63)}},Ji=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,ws=t=>t.replace(Ji,Wi),Nn=Ne?t=>Buffer.from(t,"utf8").toString("base64"):Tn?t=>Wt(Tn.encode(t)):t=>un(ws(t)),Oe=(t,e=!1)=>e?ps(Nn(t)):Nn(t),Mn=t=>Oe(t,!0),zi=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,Ki=t=>{switch(t.length){case 4:var e=(7&t.charCodeAt(0))<<18|(63&t.charCodeAt(1))<<12|(63&t.charCodeAt(2))<<6|63&t.charCodeAt(3),n=e-65536;return W((n>>>10)+55296)+W((n&1023)+56320);case 3:return W((15&t.charCodeAt(0))<<12|(63&t.charCodeAt(1))<<6|63&t.charCodeAt(2));default:return W((31&t.charCodeAt(0))<<6|63&t.charCodeAt(1))}},bs=t=>t.replace(zi,Ki),gs=t=>{if(t=t.replace(/\s+/g,""),!Hi.test(t))throw new TypeError("malformed base64.");t+="==".slice(2-(t.length&3));let e,n="",s,r;for(let i=0;i<t.length;)e=it[t.charAt(i++)]<<18|it[t.charAt(i++)]<<12|(s=it[t.charAt(i++)])<<6|(r=it[t.charAt(i++)]),n+=s===64?W(e>>16&255):r===64?W(e>>16&255,e>>8&255):W(e>>16&255,e>>8&255,e&255);return n},fn=typeof atob=="function"?t=>atob(ms(t)):Ne?t=>Buffer.from(t,"base64").toString("binary"):gs,_s=Ne?t=>Un(Buffer.from(t,"base64")):t=>Un(fn(t).split("").map(e=>e.charCodeAt(0))),Ss=t=>_s(xs(t)),Gi=Ne?t=>Buffer.from(t,"base64").toString("utf8"):Ln?t=>Ln.decode(_s(t)):t=>bs(fn(t)),xs=t=>ms(t.replace(/[-_]/g,e=>e=="-"?"+":"/")),Jt=t=>Gi(xs(t)),Qi=t=>{if(typeof t!="string")return!1;const e=t.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(e)||!/[^\s0-9a-zA-Z\-_]/.test(e)},Rs=t=>({value:t,enumerable:!1,writable:!0,configurable:!0}),Cs=function(){const t=(e,n)=>Object.defineProperty(String.prototype,e,Rs(n));t("fromBase64",function(){return Jt(this)}),t("toBase64",function(e){return Oe(this,e)}),t("toBase64URI",function(){return Oe(this,!0)}),t("toBase64URL",function(){return Oe(this,!0)}),t("toUint8Array",function(){return Ss(this)})},vs=function(){const t=(e,n)=>Object.defineProperty(Uint8Array.prototype,e,Rs(n));t("toBase64",function(e){return at(this,e)}),t("toBase64URI",function(){return at(this,!0)}),t("toBase64URL",function(){return at(this,!0)})},Yi=()=>{Cs(),vs()},dn={version:hs,VERSION:Fi,atob:fn,atobPolyfill:gs,btoa:un,btoaPolyfill:ys,fromBase64:Jt,toBase64:Oe,encode:Oe,encodeURI:Mn,encodeURL:Mn,utob:ws,btou:bs,decode:Jt,isValid:Qi,fromUint8Array:at,toUint8Array:Ss,extendString:Cs,extendUint8Array:vs,extendBuiltins:Yi},Qe="https://github.com/libsql/libsql-client-ts#supported-urls";function zt(t){if(t==="write")return"BEGIN IMMEDIATE";if(t==="read")return"BEGIN TRANSACTION READONLY";if(t==="deferred")return"BEGIN DEFERRED";throw RangeError('Unknown transaction mode, supported values are "write", "read" and "deferred"')}class Zi{columns;columnTypes;rows;rowsAffected;lastInsertRowid;constructor(e,n,s,r,i){this.columns=e,this.columnTypes=n,this.rows=s,this.rowsAffected=r,this.lastInsertRowid=i}toJSON(){return{columns:this.columns,columnTypes:this.columnTypes,rows:this.rows.map(Xi),rowsAffected:this.rowsAffected,lastInsertRowid:this.lastInsertRowid!==void 0?""+this.lastInsertRowid:null}}}function Xi(t){return Array.prototype.map.call(t,eo)}function eo(t){return typeof t=="bigint"?""+t:t instanceof ArrayBuffer?dn.fromUint8Array(new Uint8Array(t)):t}const Bn=":memory:";function to(t,e){if(typeof t!="object")throw new TypeError(`Expected client configuration as object, got ${typeof t}`);let{url:n,authToken:s,tls:r,intMode:i,concurrency:o}=t;o=Math.max(0,o||20),i??="number";let l=[];n===Bn&&(n="file::memory:");const c=Li(n),a=c.scheme.toLowerCase(),u=a==="file"&&c.path===Bn&&c.authority===void 0;let f;u?f={cache:{values:["shared","private"],update:(p,w)=>l.push(`${p}=${w}`)}}:f={tls:{values:["0","1"],update:(p,w)=>r=w==="1"},authToken:{update:(p,w)=>s=w}};for(const{key:p,value:w}of c.query?.pairs??[]){if(!Object.hasOwn(f,p))throw new L(`Unsupported URL query parameter ${JSON.stringify(p)}`,"URL_PARAM_NOT_SUPPORTED");const x=f[p];if(x.values!==void 0&&!x.values.includes(w))throw new L(`Unknown value for the "${p}" query argument: ${JSON.stringify(w)}. Supported values are: [${x.values.map(y=>'"'+y+'"').join(", ")}]`,"URL_INVALID");x.update!==void 0&&x?.update(p,w)}const d=l.length===0?"":`?${l.join("&")}`,h=c.path+d;let m;if(a==="libsql")if(r===!1){if(c.authority?.port===void 0)throw new L('A "libsql:" URL with ?tls=0 must specify an explicit port',"URL_INVALID");m="http"}else m="https";else m=a;if(m==="http"||m==="ws"?r??=!1:r??=!0,m!=="http"&&m!=="ws"&&m!=="https"&&m!=="wss"&&m!=="file")throw new L(`The client supports only "libsql:", "wss:", "ws:", "https:", "http:" and "file:" URLs, got ${JSON.stringify(c.scheme+":")}. For more information, please read ${Qe}`,"URL_SCHEME_NOT_SUPPORTED");if(i!=="number"&&i!=="bigint"&&i!=="string")throw new TypeError(`Invalid value for intMode, expected "number", "bigint" or "string", got ${JSON.stringify(i)}`);if(c.fragment!==void 0)throw new L(`URL fragments are not supported: ${JSON.stringify("#"+c.fragment)}`,"URL_INVALID");return u?{scheme:"file",tls:!1,path:h,intMode:i,concurrency:o,syncUrl:t.syncUrl,syncInterval:t.syncInterval,fetch:t.fetch,authToken:void 0,encryptionKey:void 0,authority:void 0}:{scheme:m,tls:r,authority:c.authority,path:h,authToken:s,intMode:i,concurrency:o,encryptionKey:t.encryptionKey,syncUrl:t.syncUrl,syncInterval:t.syncInterval,fetch:t.fetch}}let $e;typeof WebSocket<"u"?$e=WebSocket:typeof global<"u"?$e=global.WebSocket:typeof window<"u"?$e=window.WebSocket:typeof self<"u"&&($e=self.WebSocket);class qs{constructor(){this.intMode="number"}intMode}class D extends Error{constructor(e){super(e),this.name="ClientError"}}class q extends D{constructor(e){super(e),this.name="ProtoError"}}class As extends D{code;proto;constructor(e,n){super(e),this.name="ResponseError",this.code=n.code,this.proto=n,this.stack=void 0}}class ee extends D{constructor(e,n){n!==void 0?(super(`${e}: ${n}`),this.cause=n):super(e),this.name="ClosedError"}}class $s extends D{constructor(e){super(e),this.name="WebSocketUnsupportedError"}}class Kt extends D{constructor(e){super(e),this.name="WebSocketError"}}class ut extends D{status;constructor(e,n){super(e),this.status=n,this.name="HttpServerError"}}class ke extends D{constructor(e){super(e),this.name="ProtocolVersionError"}}class pe extends D{constructor(e){super(e),this.name="InternalError"}}class Me extends D{constructor(e){super(e),this.name="MisuseError"}}function se(t){if(typeof t=="string")return t;throw Be(t,"string")}function re(t){if(t!=null){if(typeof t=="string")return t;throw Be(t,"string or null")}}function Se(t){if(typeof t=="number")return t;throw Be(t,"number")}function Ye(t){if(typeof t=="boolean")return t;throw Be(t,"boolean")}function wt(t){if(Array.isArray(t))return t;throw Be(t,"array")}function J(t){if(t!==null&&typeof t=="object"&&!Array.isArray(t))return t;throw Be(t,"object")}function me(t,e){return wt(t).map(n=>e(J(n)))}function Be(t,e){if(t===void 0)return new q(`Expected ${e}, but the property was missing`);let n=typeof t;return t===null?n="null":Array.isArray(t)&&(n="array"),new q(`Expected ${e}, received ${n}`)}function hn(t,e){return e(J(t))}class no{#e;#t;constructor(e){this.#e=e,this.#t=!1}begin(){this.#e.push("{"),this.#t=!0}end(){this.#e.push("}"),this.#t=!1}#n(e){this.#t?(this.#e.push('"'),this.#t=!1):this.#e.push(',"'),this.#e.push(e),this.#e.push('":')}string(e,n){this.#n(e),this.#e.push(JSON.stringify(n))}stringRaw(e,n){this.#n(e),this.#e.push('"'),this.#e.push(n),this.#e.push('"')}number(e,n){this.#n(e),this.#e.push(""+n)}boolean(e,n){this.#n(e),this.#e.push(n?"true":"false")}object(e,n,s){this.#n(e),this.begin(),s(this,n),this.end()}arrayObjects(e,n,s){this.#n(e),this.#e.push("[");for(let r=0;r<n.length;++r)r!==0&&this.#e.push(","),this.begin(),s(this,n[r]),this.end();this.#e.push("]")}}function Is(t,e){const n=[],s=new no(n);return s.begin(),e(s,t),s.end(),n.join("")}const Ve=0,Gt=1,Qt=2,so=5;class ro{#e;#t;#n;constructor(e){this.#e=e,this.#t=new DataView(e.buffer,e.byteOffset,e.byteLength),this.#n=0}varint(){let e=0;for(let n=0;;n+=7){const s=this.#e[this.#n++];if(e|=(s&127)<<n,!(s&128))break}return e}varintBig(){let e=0n;for(let n=0n;;n+=7n){const s=this.#e[this.#n++];if(e|=BigInt(s&127)<<n,!(s&128))break}return e}bytes(e){const n=new Uint8Array(this.#e.buffer,this.#e.byteOffset+this.#n,e);return this.#n+=e,n}double(){const e=this.#t.getFloat64(this.#n,!0);return this.#n+=8,e}skipVarint(){for(;this.#e[this.#n++]&128;);}skip(e){this.#n+=e}eof(){return this.#n>=this.#e.byteLength}}class io{#e;#t;constructor(e){this.#e=e,this.#t=-1}setup(e){this.#t=e}#n(e){if(this.#t!==e)throw new q(`Expected wire type ${e}, got ${this.#t}`);this.#t=-1}bytes(){this.#n(Qt);const e=this.#e.varint();return this.#e.bytes(e)}string(){return new TextDecoder().decode(this.bytes())}message(e){return qt(this.bytes(),e)}int32(){return this.#n(Ve),this.#e.varint()}uint32(){return this.int32()}bool(){return this.int32()!==0}uint64(){return this.#n(Ve),this.#e.varintBig()}sint64(){const e=this.uint64();return e>>1n^-(e&1n)}double(){return this.#n(Gt),this.#e.double()}maybeSkip(){if(!(this.#t<0)){if(this.#t===Ve)this.#e.skipVarint();else if(this.#t===Gt)this.#e.skip(8);else if(this.#t===Qt){const e=this.#e.varint();this.#e.skip(e)}else if(this.#t===so)this.#e.skip(4);else throw new q(`Unexpected wire type ${this.#t}`);this.#t=-1}}}function qt(t,e){const n=new ro(t),s=new io(n);let r=e.default();for(;!n.eof();){const i=n.varint(),o=i>>3,l=i&7;s.setup(l);const c=e[o];if(c!==void 0){const a=c(s,r);a!==void 0&&(r=a)}s.maybeSkip()}return r}class pn{#e;#t;#n;#s;constructor(){this.#e=new ArrayBuffer(256),this.#t=new Uint8Array(this.#e),this.#n=new DataView(this.#e),this.#s=0}#i(e){if(this.#s+e<=this.#e.byteLength)return;let n=this.#e.byteLength;for(;n<this.#s+e;)n*=2;const s=new ArrayBuffer(n),r=new Uint8Array(s),i=new DataView(s);r.set(new Uint8Array(this.#e,0,this.#s)),this.#e=s,this.#t=r,this.#n=i}#r(e){this.#i(5),e=0|e;do{let n=e&127;e>>>=7,n|=e?128:0,this.#t[this.#s++]=n}while(e)}#l(e){this.#i(10),e=e&0xffffffffffffffffn;do{let n=Number(e&0x7fn);e>>=7n,n|=e?128:0,this.#t[this.#s++]=n}while(e)}#o(e,n){this.#r(e<<3|n)}bytes(e,n){this.#o(e,Qt),this.#r(n.byteLength),this.#i(n.byteLength),this.#t.set(n,this.#s),this.#s+=n.byteLength}string(e,n){this.bytes(e,new TextEncoder().encode(n))}message(e,n,s){const r=new pn;s(r,n),this.bytes(e,r.data())}int32(e,n){this.#o(e,Ve),this.#r(n)}uint32(e,n){this.int32(e,n)}bool(e,n){this.int32(e,n?1:0)}sint64(e,n){this.#o(e,Ve),this.#l(n<<1n^n>>63n)}double(e,n){this.#o(e,Gt),this.#i(8),this.#n.setFloat64(this.#s,n,!0),this.#s+=8}data(){return new Uint8Array(this.#e,0,this.#s)}}function Es(t,e){const n=new pn;return e(n,t),n.data()}class je{#e;#t;constructor(){this.#e=new Set,this.#t=new Set}alloc(){for(const n of this.#t)return this.#t.delete(n),this.#e.add(n),this.#e.has(this.#e.size-1)||this.#t.add(this.#e.size-1),n;const e=this.#e.size;return this.#e.add(e),e}free(e){if(!this.#e.delete(e))throw new pe("Freeing an id that is not allocated");this.#t.delete(this.#e.size),e<this.#e.size&&this.#t.add(e)}}function F(t,e){throw new pe(e)}function He(t){if(t===null)return null;if(typeof t=="string")return t;if(typeof t=="number"){if(!Number.isFinite(t))throw new RangeError("Only finite numbers (not Infinity or NaN) can be passed as arguments");return t}else if(typeof t=="bigint"){if(t<oo||t>lo)throw new RangeError("This bigint value is too large to be represented as a 64-bit integer and passed as argument");return t}else{if(typeof t=="boolean")return t?1n:0n;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(t instanceof Uint8Array)return t;if(t instanceof Date)return+t.valueOf();if(typeof t=="object")return""+t.toString();throw new TypeError("Unsupported type of value")}}const oo=-9223372036854775808n,lo=9223372036854775807n;function Os(t,e){if(t===null)return null;if(typeof t=="number")return t;if(typeof t=="string")return t;if(typeof t=="bigint")if(e==="number"){const n=Number(t);if(!Number.isSafeInteger(n))throw new RangeError("Received integer which is too large to be safely represented as a JavaScript number");return n}else{if(e==="bigint")return t;if(e==="string")return""+t;throw new Me("Invalid value for IntMode")}else{if(t instanceof Uint8Array)return t.slice().buffer;throw t===void 0?new q("Received unrecognized type of Value"):F(t,"Impossible type of Value")}}function Xe(t){return{affectedRowCount:t.affectedRowCount,lastInsertRowid:t.lastInsertRowid,columnNames:t.cols.map(e=>e.name),columnDecltypes:t.cols.map(e=>e.decltype)}}function ks(t,e){const n=Xe(t),s=t.rows.map(r=>Ts(n.columnNames,r,e));return{...n,rows:s}}function Ps(t,e){const n=Xe(t);let s;return t.rows.length>0&&(s=Ts(n.columnNames,t.rows[0],e)),{...n,row:s}}function Ls(t,e){const n=Xe(t);let s;return t.rows.length>0&&n.columnNames.length>0&&(s=Os(t.rows[0][0],e)),{...n,value:s}}function Ts(t,e,n){const s={};Object.defineProperty(s,"length",{value:e.length});for(let r=0;r<e.length;++r){const i=Os(e[r],n);Object.defineProperty(s,r,{value:i});const o=t[r];o!==void 0&&!Object.hasOwn(s,o)&&Object.defineProperty(s,o,{value:i,enumerable:!0,configurable:!0,writable:!0})}return s}function Pe(t){return new As(t.message,t)}class mn{#e;#t;#n;constructor(e,n){this.#e=e,this.#t=n,this.#n=void 0}_getSqlId(e){if(this.#e!==e)throw new Me("Attempted to use SQL text opened with other object");if(this.#n!==void 0)throw new ee("SQL text is closed",this.#n);return this.#t}close(){this._setClosed(new D("SQL text was manually closed"))}_setClosed(e){this.#n===void 0&&(this.#n=e,this.#e._closeSql(this.#t))}get closed(){return this.#n!==void 0}}function Yt(t,e){return e instanceof mn?{sqlId:e._getSqlId(t)}:{sql:""+e}}class bt{#e;#t;constructor(){this.#e=[],this.#t=[]}get length(){return this.#e.length+this.#t.length}push(e){this.#e.push(e)}shift(){return this.#t.length===0&&this.#e.length>0&&(this.#t=this.#e.reverse(),this.#e=[]),this.#t.pop()}first(){return this.#t.length!==0?this.#t[this.#t.length-1]:this.#e[0]}}let Zt=class{sql;_args;_namedArgs;constructor(e){this.sql=e,this._args=[],this._namedArgs=new Map}bindIndexes(e){this._args.length=0;for(const n of e)this._args.push(He(n));return this}bindIndex(e,n){if(e!==(e|0)||e<=0)throw new RangeError("Index of a positional argument must be positive integer");for(;this._args.length<e;)this._args.push(null);return this._args[e-1]=He(n),this}bindName(e,n){return this._namedArgs.set(e,He(n)),this}unbindAll(){return this._args.length=0,this._namedArgs.clear(),this}};function Us(t,e,n){let s,r=[],i=[];if(e instanceof Zt){s=e.sql,r=e._args;for(const[c,a]of e._namedArgs.entries())i.push({name:c,value:a})}else Array.isArray(e)?(s=e[0],Array.isArray(e[1])?r=e[1].map(c=>He(c)):i=Object.entries(e[1]).map(([c,a])=>({name:c,value:He(a)}))):s=e;const{sql:o,sqlId:l}=Yt(t,s);return{sql:o,sqlId:l,args:r,namedArgs:i,wantRows:n}}let co=class{_stream;#e;_steps;#t;constructor(e,n){this._stream=e,this.#e=n,this._steps=[],this.#t=!1}step(){return new fo(this)}execute(){if(this.#t)throw new Me("This batch has already been executed");this.#t=!0;const e={steps:this._steps.map(n=>n.proto)};return this.#e?uo(this._stream,this._steps,e):ao(this._stream,this._steps,e)}};function ao(t,e,n){return t._batch(n).then(s=>{for(let r=0;r<e.length;++r){const i=s.stepResults.get(r),o=s.stepErrors.get(r);e[r].callback(i,o)}})}async function uo(t,e,n){const s=await t._openCursor(n);try{let r=0,i,o=[];for(;;){const l=await s.next();if(l===void 0)break;if(l.type==="step_begin"){if(l.step<r||l.step>=e.length)throw new q("Server produced StepBeginEntry for unexpected step");if(i!==void 0)throw new q("Server produced StepBeginEntry before terminating previous step");for(let c=r;c<l.step;++c)e[c].callback(void 0,void 0);r=l.step+1,i=l,o=[]}else if(l.type==="step_end"){if(i===void 0)throw new q("Server produced StepEndEntry but no step is active");const c={cols:i.cols,rows:o,affectedRowCount:l.affectedRowCount,lastInsertRowid:l.lastInsertRowid};e[i.step].callback(c,void 0),i=void 0,o=[]}else if(l.type==="step_error"){if(i===void 0){if(l.step>=e.length)throw new q("Server produced StepErrorEntry for unexpected step");for(let c=r;c<l.step;++c)e[c].callback(void 0,void 0)}else{if(l.step!==i.step)throw new q("Server produced StepErrorEntry for unexpected step");i=void 0,o=[]}e[l.step].callback(void 0,l.error),r=l.step+1}else if(l.type==="row"){if(i===void 0)throw new q("Server produced RowEntry but no step is active");o.push(l.row)}else throw l.type==="error"?Pe(l.error):l.type==="none"?new q("Server produced unrecognized CursorEntry"):F(l,"Impossible CursorEntry")}if(i!==void 0)throw new q("Server closed Cursor before terminating active step");for(let l=r;l<e.length;++l)e[l].callback(void 0,void 0)}finally{s.close()}}let fo=class{_batch;#e;_index;constructor(e){this._batch=e,this.#e=[],this._index=void 0}condition(e){return this.#e.push(e._proto),this}query(e){return this.#t(e,!0,ks)}queryRow(e){return this.#t(e,!0,Ps)}queryValue(e){return this.#t(e,!0,Ls)}run(e){return this.#t(e,!1,Xe)}#t(e,n,s){if(this._index!==void 0)throw new Me("This BatchStep has already been added to the batch");const r=Us(this._batch._stream._sqlOwner(),e,n);let i;this.#e.length===0?i=void 0:this.#e.length===1?i=this.#e[0]:i={type:"and",conds:this.#e.slice()};const o={stmt:r,condition:i};return new Promise((l,c)=>{const a=(u,f)=>{u!==void 0&&f!==void 0?c(new q("Server returned both result and error")):f!==void 0?c(Pe(f)):l(u!==void 0?s(u,this._batch._stream.intMode):void 0)};this._index=this._batch._steps.length,this._batch._steps.push({proto:o,callback:a})})}},K=class we{_batch;_proto;constructor(e,n){this._batch=e,this._proto=n}static ok(e){return new we(e._batch,{type:"ok",step:Dn(e)})}static error(e){return new we(e._batch,{type:"error",step:Dn(e)})}static not(e){return new we(e._batch,{type:"not",cond:e._proto})}static and(e,n){for(const s of n)jn(e,s);return new we(e,{type:"and",conds:n.map(s=>s._proto)})}static or(e,n){for(const s of n)jn(e,s);return new we(e,{type:"or",conds:n.map(s=>s._proto)})}static isAutocommit(e){return e._stream.client()._ensureVersion(3,"BatchCond.isAutocommit()"),new we(e,{type:"is_autocommit"})}};function Dn(t){if(t._index===void 0)throw new Me("Cannot add a condition referencing a step that has not been added to the batch");return t._index}function jn(t,e){if(e._batch!==t)throw new Me("Cannot mix BatchCond objects for different Batch objects")}function ho(t){return{paramNames:t.params.map(e=>e.name),columns:t.cols,isExplain:t.isExplain,isReadonly:t.isReadonly}}class Ns{constructor(e){this.intMode=e}query(e){return this.#e(e,!0,ks)}queryRow(e){return this.#e(e,!0,Ps)}queryValue(e){return this.#e(e,!0,Ls)}run(e){return this.#e(e,!1,Xe)}#e(e,n,s){const r=Us(this._sqlOwner(),e,n);return this._execute(r).then(i=>s(i,this.intMode))}batch(e=!1){return new co(this,e)}describe(e){const n=Yt(this._sqlOwner(),e);return this._describe(n).then(ho)}sequence(e){const n=Yt(this._sqlOwner(),e);return this._sequence(n)}intMode}class Ms{}const po=1e3,mo=10;class yo extends Ms{#e;#t;#n;#s;#i;#r;#l;constructor(e,n,s){super(),this.#e=e,this.#t=n,this.#n=s,this.#s=new bt,this.#i=new bt,this.#r=void 0,this.#l=!1}async next(){for(;;){if(this.#r!==void 0)throw new ee("Cursor is closed",this.#r);for(;!this.#l&&this.#i.length<mo;)this.#i.push(this.#o());const e=this.#s.shift();if(this.#l||e!==void 0)return e;await this.#i.shift().then(n=>{if(n!==void 0){for(const s of n.entries)this.#s.push(s);this.#l||=n.done}})}}#o(){return this.#t._sendCursorRequest(this,{type:"fetch_cursor",cursorId:this.#n,maxCount:po}).then(e=>e,e=>{this._setClosed(e)})}_setClosed(e){this.#r===void 0&&(this.#r=e,this.#t._sendCursorRequest(this,{type:"close_cursor",cursorId:this.#n}).catch(()=>{}),this.#t._cursorClosed(this))}close(){this._setClosed(new D("Cursor was manually closed"))}get closed(){return this.#r!==void 0}}class yn extends Ns{#e;#t;#n;#s;#i;#r;static open(e){const n=e._streamIdAlloc.alloc(),s=new yn(e,n),r=()=>{},i=l=>s.#a(l),o={type:"open_stream",streamId:n};return e._sendRequest(o,{responseCallback:r,errorCallback:i}),s}constructor(e,n){super(e.intMode),this.#e=e,this.#t=n,this.#n=new bt,this.#s=void 0,this.#i=!1,this.#r=void 0}client(){return this.#e}_sqlOwner(){return this.#e}_execute(e){return this.#l({type:"execute",streamId:this.#t,stmt:e}).then(n=>n.result)}_batch(e){return this.#l({type:"batch",streamId:this.#t,batch:e}).then(n=>n.result)}_describe(e){return this.#e._ensureVersion(2,"describe()"),this.#l({type:"describe",streamId:this.#t,sql:e.sql,sqlId:e.sqlId}).then(n=>n.result)}_sequence(e){return this.#e._ensureVersion(2,"sequence()"),this.#l({type:"sequence",streamId:this.#t,sql:e.sql,sqlId:e.sqlId}).then(n=>{})}getAutocommit(){return this.#e._ensureVersion(3,"getAutocommit()"),this.#l({type:"get_autocommit",streamId:this.#t}).then(e=>e.isAutocommit)}#l(e){return new Promise((n,s)=>{this.#o({type:"request",request:e,responseCallback:n,errorCallback:s})})}_openCursor(e){return this.#e._ensureVersion(3,"cursor"),new Promise((n,s)=>{this.#o({type:"cursor",batch:e,cursorCallback:n,errorCallback:s})})}_sendCursorRequest(e,n){if(e!==this.#s)throw new pe("Cursor not associated with the stream attempted to execute a request");return new Promise((s,r)=>{this.#r!==void 0?r(new ee("Stream is closed",this.#r)):this.#e._sendRequest(n,{responseCallback:s,errorCallback:r})})}_cursorClosed(e){if(e!==this.#s)throw new pe("Cursor was closed, but it was not associated with the stream");this.#s=void 0,this.#c()}#o(e){this.#r!==void 0?e.errorCallback(new ee("Stream is closed",this.#r)):this.#i?e.errorCallback(new ee("Stream is closing",void 0)):(this.#n.push(e),this.#c())}#c(){for(;;){const e=this.#n.first();if(e===void 0&&this.#s===void 0&&this.#i){this.#a(new D("Stream was gracefully closed"));break}else if(e?.type==="request"&&this.#s===void 0){const{request:n,responseCallback:s,errorCallback:r}=e;this.#n.shift(),this.#e._sendRequest(n,{responseCallback:s,errorCallback:r})}else if(e?.type==="cursor"&&this.#s===void 0){const{batch:n,cursorCallback:s}=e;this.#n.shift();const r=this.#e._cursorIdAlloc.alloc(),i=new yo(this.#e,this,r),o={type:"open_cursor",streamId:this.#t,cursorId:r,batch:n},l=()=>{},c=a=>i._setClosed(a);this.#e._sendRequest(o,{responseCallback:l,errorCallback:c}),this.#s=i,s(i)}else break}}#a(e){if(this.#r!==void 0)return;for(this.#r=e,this.#s!==void 0&&this.#s._setClosed(e);;){const i=this.#n.shift();if(i!==void 0)i.errorCallback(e);else break}const n={type:"close_stream",streamId:this.#t},s=()=>this.#e._streamIdAlloc.free(this.#t),r=()=>{};this.#e._sendRequest(n,{responseCallback:s,errorCallback:r})}close(){this.#a(new D("Stream was manually closed"))}closeGracefully(){this.#i=!0,this.#c()}get closed(){return this.#r!==void 0||this.#i}}function wn(t,e){e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId),t.arrayObjects("args",e.args,Bs),t.arrayObjects("named_args",e.namedArgs,wo),t.boolean("want_rows",e.wantRows)}function wo(t,e){t.string("name",e.name),t.object("value",e.value,Bs)}function gt(t,e){t.arrayObjects("steps",e.steps,bo)}function bo(t,e){e.condition!==void 0&&t.object("condition",e.condition,Xt),t.object("stmt",e.stmt,wn)}function Xt(t,e){if(t.stringRaw("type",e.type),e.type==="ok"||e.type==="error")t.number("step",e.step);else if(e.type==="not")t.object("cond",e.cond,Xt);else if(e.type==="and"||e.type==="or")t.arrayObjects("conds",e.conds,Xt);else if(e.type!=="is_autocommit")throw F(e,"Impossible type of BatchCond")}function Bs(t,e){if(e===null)t.stringRaw("type","null");else if(typeof e=="bigint")t.stringRaw("type","integer"),t.stringRaw("value",""+e);else if(typeof e=="number")t.stringRaw("type","float"),t.number("value",e);else if(typeof e=="string")t.stringRaw("type","text"),t.string("value",e);else if(e instanceof Uint8Array)t.stringRaw("type","blob"),t.stringRaw("base64",dn.fromUint8Array(e));else if(e!==void 0)throw F(e,"Impossible type of Value")}function go(t,e){if(t.stringRaw("type",e.type),e.type==="hello")e.jwt!==void 0&&t.string("jwt",e.jwt);else if(e.type==="request")t.number("request_id",e.requestId),t.object("request",e.request,_o);else throw F(e,"Impossible type of ClientMsg")}function _o(t,e){if(t.stringRaw("type",e.type),e.type==="open_stream")t.number("stream_id",e.streamId);else if(e.type==="close_stream")t.number("stream_id",e.streamId);else if(e.type==="execute")t.number("stream_id",e.streamId),t.object("stmt",e.stmt,wn);else if(e.type==="batch")t.number("stream_id",e.streamId),t.object("batch",e.batch,gt);else if(e.type==="open_cursor")t.number("stream_id",e.streamId),t.number("cursor_id",e.cursorId),t.object("batch",e.batch,gt);else if(e.type==="close_cursor")t.number("cursor_id",e.cursorId);else if(e.type==="fetch_cursor")t.number("cursor_id",e.cursorId),t.number("max_count",e.maxCount);else if(e.type==="sequence")t.number("stream_id",e.streamId),e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="describe")t.number("stream_id",e.streamId),e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="store_sql")t.number("sql_id",e.sqlId),t.string("sql",e.sql);else if(e.type==="close_sql")t.number("sql_id",e.sqlId);else if(e.type==="get_autocommit")t.number("stream_id",e.streamId);else throw F(e,"Impossible type of Request")}function bn(t,e){e.sql!==void 0&&t.string(1,e.sql),e.sqlId!==void 0&&t.int32(2,e.sqlId);for(const n of e.args)t.message(3,n,Ds);for(const n of e.namedArgs)t.message(4,n,So);t.bool(5,e.wantRows)}function So(t,e){t.string(1,e.name),t.message(2,e.value,Ds)}function At(t,e){for(const n of e.steps)t.message(1,n,xo)}function xo(t,e){e.condition!==void 0&&t.message(1,e.condition,gn),t.message(2,e.stmt,bn)}function gn(t,e){if(e.type==="ok")t.uint32(1,e.step);else if(e.type==="error")t.uint32(2,e.step);else if(e.type==="not")t.message(3,e.cond,gn);else if(e.type==="and")t.message(4,e.conds,Fn);else if(e.type==="or")t.message(5,e.conds,Fn);else if(e.type==="is_autocommit")t.message(6,void 0,js);else throw F(e,"Impossible type of BatchCond")}function Fn(t,e){for(const n of e)t.message(1,n,gn)}function Ds(t,e){if(e===null)t.message(1,void 0,js);else if(typeof e=="bigint")t.sint64(2,e);else if(typeof e=="number")t.double(3,e);else if(typeof e=="string")t.string(4,e);else if(e instanceof Uint8Array)t.bytes(5,e);else if(e!==void 0)throw F(e,"Impossible type of Value")}function js(t,e){}function Ro(t,e){if(e.type==="hello")t.message(1,e,Co);else if(e.type==="request")t.message(2,e,vo);else throw F(e,"Impossible type of ClientMsg")}function Co(t,e){e.jwt!==void 0&&t.string(1,e.jwt)}function vo(t,e){t.int32(1,e.requestId);const n=e.request;if(n.type==="open_stream")t.message(2,n,qo);else if(n.type==="close_stream")t.message(3,n,Ao);else if(n.type==="execute")t.message(4,n,$o);else if(n.type==="batch")t.message(5,n,Io);else if(n.type==="open_cursor")t.message(6,n,Eo);else if(n.type==="close_cursor")t.message(7,n,Oo);else if(n.type==="fetch_cursor")t.message(8,n,ko);else if(n.type==="sequence")t.message(9,n,Po);else if(n.type==="describe")t.message(10,n,Lo);else if(n.type==="store_sql")t.message(11,n,To);else if(n.type==="close_sql")t.message(12,n,Uo);else if(n.type==="get_autocommit")t.message(13,n,No);else throw F(n,"Impossible type of Request")}function qo(t,e){t.int32(1,e.streamId)}function Ao(t,e){t.int32(1,e.streamId)}function $o(t,e){t.int32(1,e.streamId),t.message(2,e.stmt,bn)}function Io(t,e){t.int32(1,e.streamId),t.message(2,e.batch,At)}function Eo(t,e){t.int32(1,e.streamId),t.int32(2,e.cursorId),t.message(3,e.batch,At)}function Oo(t,e){t.int32(1,e.cursorId)}function ko(t,e){t.int32(1,e.cursorId),t.uint32(2,e.maxCount)}function Po(t,e){t.int32(1,e.streamId),e.sql!==void 0&&t.string(2,e.sql),e.sqlId!==void 0&&t.int32(3,e.sqlId)}function Lo(t,e){t.int32(1,e.streamId),e.sql!==void 0&&t.string(2,e.sql),e.sqlId!==void 0&&t.int32(3,e.sqlId)}function To(t,e){t.int32(1,e.sqlId),t.string(2,e.sql)}function Uo(t,e){t.int32(1,e.sqlId)}function No(t,e){t.int32(1,e.streamId)}function Le(t){const e=se(t.message),n=re(t.code);return{message:e,code:n}}function _n(t){const e=me(t.cols,Fs),n=wt(t.rows).map(o=>me(o,Js)),s=Se(t.affected_row_count),r=re(t.last_insert_rowid),i=r!==void 0?BigInt(r):void 0;return{cols:e,rows:n,affectedRowCount:s,lastInsertRowid:i}}function Fs(t){const e=re(t.name),n=re(t.decltype);return{name:e,decltype:n}}function Vs(t){const e=new Map;wt(t.step_results).forEach((s,r)=>{s!==null&&e.set(r,_n(J(s)))});const n=new Map;return wt(t.step_errors).forEach((s,r)=>{s!==null&&n.set(r,Le(J(s)))}),{stepResults:e,stepErrors:n}}function Hs(t){const e=se(t.type);if(e==="step_begin"){const n=Se(t.step),s=me(t.cols,Fs);return{type:"step_begin",step:n,cols:s}}else if(e==="step_end"){const n=Se(t.affected_row_count),s=re(t.last_insert_rowid),r=s!==void 0?BigInt(s):void 0;return{type:"step_end",affectedRowCount:n,lastInsertRowid:r}}else if(e==="step_error"){const n=Se(t.step),s=Le(J(t.error));return{type:"step_error",step:n,error:s}}else{if(e==="row")return{type:"row",row:me(t.row,Js)};if(e==="error")return{type:"error",error:Le(J(t.error))};throw new q("Unexpected type of CursorEntry")}}function Ws(t){const e=me(t.params,Mo),n=me(t.cols,Bo),s=Ye(t.is_explain),r=Ye(t.is_readonly);return{params:e,cols:n,isExplain:s,isReadonly:r}}function Mo(t){return{name:re(t.name)}}function Bo(t){const e=se(t.name),n=re(t.decltype);return{name:e,decltype:n}}function Js(t){const e=se(t.type);if(e==="null")return null;if(e==="integer"){const n=se(t.value);return BigInt(n)}else{if(e==="float")return Se(t.value);if(e==="text")return se(t.value);if(e==="blob")return dn.toUint8Array(se(t.base64));throw new q("Unexpected type of Value")}}function Do(t){const e=se(t.type);if(e==="hello_ok")return{type:"hello_ok"};if(e==="hello_error")return{type:"hello_error",error:Le(J(t.error))};if(e==="response_ok"){const n=Se(t.request_id),s=jo(J(t.response));return{type:"response_ok",requestId:n,response:s}}else if(e==="response_error"){const n=Se(t.request_id),s=Le(J(t.error));return{type:"response_error",requestId:n,error:s}}else throw new q("Unexpected type of ServerMsg")}function jo(t){const e=se(t.type);if(e==="open_stream")return{type:"open_stream"};if(e==="close_stream")return{type:"close_stream"};if(e==="execute")return{type:"execute",result:_n(J(t.result))};if(e==="batch")return{type:"batch",result:Vs(J(t.result))};if(e==="open_cursor")return{type:"open_cursor"};if(e==="close_cursor")return{type:"close_cursor"};if(e==="fetch_cursor"){const n=me(t.entries,Hs),s=Ye(t.done);return{type:"fetch_cursor",entries:n,done:s}}else{if(e==="sequence")return{type:"sequence"};if(e==="describe")return{type:"describe",result:Ws(J(t.result))};if(e==="store_sql")return{type:"store_sql"};if(e==="close_sql")return{type:"close_sql"};if(e==="get_autocommit")return{type:"get_autocommit",isAutocommit:Ye(t.is_autocommit)};throw new q("Unexpected type of Response")}}const oe={default(){return{message:"",code:void 0}},1(t,e){e.message=t.string()},2(t,e){e.code=t.string()}},Te={default(){return{cols:[],rows:[],affectedRowCount:0,lastInsertRowid:void 0}},1(t,e){e.cols.push(t.message(zs))},2(t,e){e.rows.push(t.message(Ks))},3(t,e){e.affectedRowCount=Number(t.uint64())},4(t,e){e.lastInsertRowid=t.sint64()}},zs={default(){return{name:void 0,decltype:void 0}},1(t,e){e.name=t.string()},2(t,e){e.decltype=t.string()}},Ks={default(){return[]},1(t,e){e.push(t.message(Go))}},_t={default(){return{stepResults:new Map,stepErrors:new Map}},1(t,e){const[n,s]=t.message(Fo);e.stepResults.set(n,s)},2(t,e){const[n,s]=t.message(Vo);e.stepErrors.set(n,s)}},Fo={default(){return[0,Te.default()]},1(t,e){e[0]=t.uint32()},2(t,e){e[1]=t.message(Te)}},Vo={default(){return[0,oe.default()]},1(t,e){e[0]=t.uint32()},2(t,e){e[1]=t.message(oe)}},Gs={default(){return{type:"none"}},1(t){return t.message(Ho)},2(t){return t.message(Wo)},3(t){return t.message(Jo)},4(t){return{type:"row",row:t.message(Ks)}},5(t){return{type:"error",error:t.message(oe)}}},Ho={default(){return{type:"step_begin",step:0,cols:[]}},1(t,e){e.step=t.uint32()},2(t,e){e.cols.push(t.message(zs))}},Wo={default(){return{type:"step_end",affectedRowCount:0,lastInsertRowid:void 0}},1(t,e){e.affectedRowCount=t.uint32()},2(t,e){e.lastInsertRowid=t.uint64()}},Jo={default(){return{type:"step_error",step:0,error:oe.default()}},1(t,e){e.step=t.uint32()},2(t,e){e.error=t.message(oe)}},St={default(){return{params:[],cols:[],isExplain:!1,isReadonly:!1}},1(t,e){e.params.push(t.message(zo))},2(t,e){e.cols.push(t.message(Ko))},3(t,e){e.isExplain=t.bool()},4(t,e){e.isReadonly=t.bool()}},zo={default(){return{name:void 0}},1(t,e){e.name=t.string()}},Ko={default(){return{name:"",decltype:void 0}},1(t,e){e.name=t.string()},2(t,e){e.decltype=t.string()}},Go={default(){},1(t){return null},2(t){return t.sint64()},3(t){return t.double()},4(t){return t.string()},5(t){return t.bytes()}},Qo={default(){return{type:"none"}},1(t){return{type:"hello_ok"}},2(t){return t.message(Yo)},3(t){return t.message(Xo)},4(t){return t.message(Zo)}},Yo={default(){return{type:"hello_error",error:oe.default()}},1(t,e){e.error=t.message(oe)}},Zo={default(){return{type:"response_error",requestId:0,error:oe.default()}},1(t,e){e.requestId=t.int32()},2(t,e){e.error=t.message(oe)}},Xo={default(){return{type:"response_ok",requestId:0,response:{type:"none"}}},1(t,e){e.requestId=t.int32()},2(t,e){e.response={type:"open_stream"}},3(t,e){e.response={type:"close_stream"}},4(t,e){e.response=t.message(el)},5(t,e){e.response=t.message(tl)},6(t,e){e.response={type:"open_cursor"}},7(t,e){e.response={type:"close_cursor"}},8(t,e){e.response=t.message(nl)},9(t,e){e.response={type:"sequence"}},10(t,e){e.response=t.message(sl)},11(t,e){e.response={type:"store_sql"}},12(t,e){e.response={type:"close_sql"}},13(t,e){e.response=t.message(rl)}},el={default(){return{type:"execute",result:Te.default()}},1(t,e){e.result=t.message(Te)}},tl={default(){return{type:"batch",result:_t.default()}},1(t,e){e.result=t.message(_t)}},nl={default(){return{type:"fetch_cursor",entries:[],done:!1}},1(t,e){e.entries.push(t.message(Gs))},2(t,e){e.done=t.bool()}},sl={default(){return{type:"describe",result:St.default()}},1(t,e){e.result=t.message(St)}},rl={default(){return{type:"get_autocommit",isAutocommit:!1}},1(t,e){e.isAutocommit=t.bool()}},il=new Map([["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]),Qs=new Map([["hrana3-protobuf",{version:3,encoding:"protobuf"}],["hrana3",{version:3,encoding:"json"}],["hrana2",{version:2,encoding:"json"}],["hrana1",{version:1,encoding:"json"}]]);let ol=class extends qs{#e;#t;#n;#s;#i;#r;#l;#o;#c;_streamIdAlloc;_cursorIdAlloc;#a;constructor(e,n){super(),this.#e=e,this.#t=[],this.#n=!1,this.#s=void 0,this.#i=!1,this.#r=void 0,this.#l=!1,this.#o=new Map,this.#c=new je,this._streamIdAlloc=new je,this._cursorIdAlloc=new je,this.#a=new je,this.#e.binaryType="arraybuffer",this.#e.addEventListener("open",()=>this.#p()),this.#e.addEventListener("close",s=>this.#h(s)),this.#e.addEventListener("error",s=>this.#m(s)),this.#e.addEventListener("message",s=>this.#w(s)),this.#f({type:"hello",jwt:n})}#f(e){if(this.#s!==void 0)throw new pe("Trying to send a message on a closed client");if(this.#n)this.#d(e);else{const n=()=>this.#d(e),s=()=>{};this.#t.push({openCallback:n,errorCallback:s})}}#p(){const e=this.#e.protocol;if(e===void 0){this.#u(new D("The `WebSocket.protocol` property is undefined. This most likely means that the WebSocket implementation provided by the environment is broken. If you are using Miniflare 2, please update to Miniflare 3, which fixes this problem."));return}else if(e==="")this.#r={version:1,encoding:"json"};else if(this.#r=Qs.get(e),this.#r===void 0){this.#u(new q(`Unrecognized WebSocket subprotocol: ${JSON.stringify(e)}`));return}for(const n of this.#t)n.openCallback();this.#t.length=0,this.#n=!0}#d(e){const n=this.#r.encoding;if(n==="json"){const s=Is(e,go);this.#e.send(s)}else if(n==="protobuf"){const s=Es(e,Ro);this.#e.send(s)}else throw F(n,"Impossible encoding")}getVersion(){return new Promise((e,n)=>{if(this.#l=!0,this.#s!==void 0)n(this.#s);else if(this.#n)e(this.#r.version);else{const s=()=>e(this.#r.version);this.#t.push({openCallback:s,errorCallback:n})}})}_ensureVersion(e,n){if(this.#r===void 0||!this.#l)throw new ke(`${n} is supported only on protocol version ${e} and higher, but the version supported by the WebSocket server is not yet known. Use Client.getVersion() to wait until the version is available.`);if(this.#r.version<e)throw new ke(`${n} is supported on protocol version ${e} and higher, but the WebSocket server only supports version ${this.#r.version}`)}_sendRequest(e,n){if(this.#s!==void 0){n.errorCallback(new ee("Client is closed",this.#s));return}const s=this.#c.alloc();this.#o.set(s,{...n,type:e.type}),this.#f({type:"request",requestId:s,request:e})}#m(e){const s=e.message??"WebSocket was closed due to an error";this.#u(new Kt(s))}#h(e){let n=`WebSocket was closed with code ${e.code}`;e.reason&&(n+=`: ${e.reason}`),this.#u(new Kt(n))}#u(e){if(this.#s===void 0){this.#s=e;for(const n of this.#t)n.errorCallback(e);this.#t.length=0;for(const[n,s]of this.#o.entries())s.errorCallback(e),this.#c.free(n);this.#o.clear(),this.#e.close()}}#w(e){if(this.#s===void 0)try{let n;const s=this.#r.encoding;if(s==="json"){if(typeof e.data!="string"){this.#e.close(3003,"Only text messages are accepted with JSON encoding"),this.#u(new q("Received non-text message from server with JSON encoding"));return}n=hn(JSON.parse(e.data),Do)}else if(s==="protobuf"){if(!(e.data instanceof ArrayBuffer)){this.#e.close(3003,"Only binary messages are accepted with Protobuf encoding"),this.#u(new q("Received non-binary message from server with Protobuf encoding"));return}n=qt(new Uint8Array(e.data),Qo)}else throw F(s,"Impossible encoding");this.#y(n)}catch(n){this.#e.close(3007,"Could not handle message"),this.#u(n)}}#y(e){if(e.type==="none")throw new q("Received an unrecognized ServerMsg");if(e.type==="hello_ok"||e.type==="hello_error"){if(this.#i)throw new q("Received a duplicated hello response");if(this.#i=!0,e.type==="hello_error")throw Pe(e.error);return}else if(!this.#i)throw new q("Received a non-hello message before a hello response");if(e.type==="response_ok"){const n=e.requestId,s=this.#o.get(n);if(this.#o.delete(n),s===void 0)throw new q("Received unexpected OK response");this.#c.free(n);try{if(s.type!==e.response.type)throw console.dir({responseState:s,msg:e}),new q("Received unexpected type of response");s.responseCallback(e.response)}catch(r){throw s.errorCallback(r),r}}else if(e.type==="response_error"){const n=e.requestId,s=this.#o.get(n);if(this.#o.delete(n),s===void 0)throw new q("Received unexpected error response");this.#c.free(n),s.errorCallback(Pe(e.error))}else throw F(e,"Impossible ServerMsg type")}openStream(){return yn.open(this)}storeSql(e){this._ensureVersion(2,"storeSql()");const n=this.#a.alloc(),s=new mn(this,n),r=()=>{},i=l=>s._setClosed(l),o={type:"store_sql",sqlId:n,sql:e};return this._sendRequest(o,{responseCallback:r,errorCallback:i}),s}_closeSql(e){if(this.#s!==void 0)return;const n=()=>this.#a.free(e),s=i=>this.#u(i),r={type:"close_sql",sqlId:e};this._sendRequest(r,{responseCallback:n,errorCallback:s})}close(){this.#u(new D("Client was manually closed"))}get closed(){return this.#s!==void 0}};const ll=fetch,Ys=Request,cl=Headers;let Ie;if(typeof queueMicrotask<"u")Ie=queueMicrotask;else{const t=Promise.resolve();Ie=e=>{t.then(e)}}class al{#e;#t;#n;constructor(e){this.#e=new Uint8Array(new ArrayBuffer(e)),this.#t=0,this.#n=0}get length(){return this.#n-this.#t}data(){return this.#e.slice(this.#t,this.#n)}push(e){this.#s(e.byteLength),this.#e.set(e,this.#n),this.#n+=e.byteLength}#s(e){if(this.#n+e<=this.#e.byteLength)return;const n=this.#n-this.#t;if(n+e<=this.#e.byteLength&&2*this.#n>=this.#e.byteLength)this.#e.copyWithin(0,this.#t,this.#n);else{let s=this.#e.byteLength;do s*=2;while(n+e>s);const r=new Uint8Array(new ArrayBuffer(s));r.set(this.#e.slice(this.#t,this.#n),0),this.#e=r}this.#n=n,this.#t=0}shift(e){this.#t+=e}}function ul(t){const e=re(t.baton),n=re(t.base_url),s=me(t.results,fl);return{baton:e,baseUrl:n,results:s}}function fl(t){const e=se(t.type);if(e==="ok")return{type:"ok",response:dl(J(t.response))};if(e==="error")return{type:"error",error:Le(J(t.error))};throw new q("Unexpected type of StreamResult")}function dl(t){const e=se(t.type);if(e==="close")return{type:"close"};if(e==="execute")return{type:"execute",result:_n(J(t.result))};if(e==="batch")return{type:"batch",result:Vs(J(t.result))};if(e==="sequence")return{type:"sequence"};if(e==="describe")return{type:"describe",result:Ws(J(t.result))};if(e==="store_sql")return{type:"store_sql"};if(e==="close_sql")return{type:"close_sql"};if(e==="get_autocommit")return{type:"get_autocommit",isAutocommit:Ye(t.is_autocommit)};throw new q("Unexpected type of StreamResponse")}function hl(t){const e=re(t.baton),n=re(t.base_url);return{baton:e,baseUrl:n}}const pl={default(){return{baton:void 0,baseUrl:void 0,results:[]}},1(t,e){e.baton=t.string()},2(t,e){e.baseUrl=t.string()},3(t,e){e.results.push(t.message(ml))}},ml={default(){return{type:"none"}},1(t){return{type:"ok",response:t.message(yl)}},2(t){return{type:"error",error:t.message(oe)}}},yl={default(){return{type:"none"}},1(t){return{type:"close"}},2(t){return t.message(wl)},3(t){return t.message(bl)},4(t){return{type:"sequence"}},5(t){return t.message(gl)},6(t){return{type:"store_sql"}},7(t){return{type:"close_sql"}},8(t){return t.message(_l)}},wl={default(){return{type:"execute",result:Te.default()}},1(t,e){e.result=t.message(Te)}},bl={default(){return{type:"batch",result:_t.default()}},1(t,e){e.result=t.message(_t)}},gl={default(){return{type:"describe",result:St.default()}},1(t,e){e.result=t.message(St)}},_l={default(){return{type:"get_autocommit",isAutocommit:!1}},1(t,e){e.isAutocommit=t.bool()}},Sl={default(){return{baton:void 0,baseUrl:void 0}},1(t,e){e.baton=t.string()},2(t,e){e.baseUrl=t.string()}};class xl extends Ms{#e;#t;#n;#s;#i;#r;constructor(e,n){super(),this.#e=e,this.#t=n,this.#n=void 0,this.#s=new al(16*1024),this.#i=void 0,this.#r=!1}async open(e){if(e.body===null)throw new q("No response body for cursor request");this.#n=e.body.getReader();const n=await this.#l(hl,Sl);if(n===void 0)throw new q("Empty response to cursor request");return n}next(){return this.#l(Hs,Gs)}close(){this._setClosed(new D("Cursor was manually closed"))}_setClosed(e){this.#i===void 0&&(this.#i=e,this.#e._cursorClosed(this),this.#n!==void 0&&this.#n.cancel())}get closed(){return this.#i!==void 0}async#l(e,n){for(;;){if(this.#r)return;if(this.#i!==void 0)throw new ee("Cursor is closed",this.#i);if(this.#t==="json"){const i=this.#o();if(i!==void 0){const o=new TextDecoder().decode(i),l=JSON.parse(o);return hn(l,e)}}else if(this.#t==="protobuf"){const i=this.#c();if(i!==void 0)return qt(i,n)}else throw F(this.#t,"Impossible encoding");if(this.#n===void 0)throw new pe("Attempted to read from HTTP cursor before it was opened");const{value:s,done:r}=await this.#n.read();if(r&&this.#s.length===0)this.#r=!0;else{if(r)throw new q("Unexpected end of cursor stream");this.#s.push(s)}}}#o(){const e=this.#s.data(),s=e.indexOf(10);if(s<0)return;const r=e.slice(0,s);return this.#s.shift(s+1),r}#c(){const e=this.#s.data();let n=0,s=0;for(;;){if(s>=e.byteLength)return;const i=e[s];if(n|=(i&127)<<7*s,s+=1,!(i&128))break}if(e.byteLength<s+n)return;const r=e.slice(s,s+n);return this.#s.shift(s+n),r}}function Rl(t,e){e.baton!==void 0&&t.string("baton",e.baton),t.arrayObjects("requests",e.requests,Cl)}function Cl(t,e){if(t.stringRaw("type",e.type),e.type!=="close"){if(e.type==="execute")t.object("stmt",e.stmt,wn);else if(e.type==="batch")t.object("batch",e.batch,gt);else if(e.type==="sequence")e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="describe")e.sql!==void 0&&t.string("sql",e.sql),e.sqlId!==void 0&&t.number("sql_id",e.sqlId);else if(e.type==="store_sql")t.number("sql_id",e.sqlId),t.string("sql",e.sql);else if(e.type==="close_sql")t.number("sql_id",e.sqlId);else if(e.type!=="get_autocommit")throw F(e,"Impossible type of StreamRequest")}}function vl(t,e){e.baton!==void 0&&t.string("baton",e.baton),t.object("batch",e.batch,gt)}function ql(t,e){e.baton!==void 0&&t.string(1,e.baton);for(const n of e.requests)t.message(2,n,Al)}function Al(t,e){if(e.type==="close")t.message(1,e,$l);else if(e.type==="execute")t.message(2,e,Il);else if(e.type==="batch")t.message(3,e,El);else if(e.type==="sequence")t.message(4,e,Ol);else if(e.type==="describe")t.message(5,e,kl);else if(e.type==="store_sql")t.message(6,e,Pl);else if(e.type==="close_sql")t.message(7,e,Ll);else if(e.type==="get_autocommit")t.message(8,e,Tl);else throw F(e,"Impossible type of StreamRequest")}function $l(t,e){}function Il(t,e){t.message(1,e.stmt,bn)}function El(t,e){t.message(1,e.batch,At)}function Ol(t,e){e.sql!==void 0&&t.string(1,e.sql),e.sqlId!==void 0&&t.int32(2,e.sqlId)}function kl(t,e){e.sql!==void 0&&t.string(1,e.sql),e.sqlId!==void 0&&t.int32(2,e.sqlId)}function Pl(t,e){t.int32(1,e.sqlId),t.string(2,e.sql)}function Ll(t,e){t.int32(1,e.sqlId)}function Tl(t,e){}function Ul(t,e){e.baton!==void 0&&t.string(1,e.baton),t.message(2,e.batch,At)}class Nl extends Ns{#e;#t;#n;#s;#i;#r;#l;#o;#c;#a;#f;#p;constructor(e,n,s,r){super(e.intMode),this.#e=e,this.#t=n.toString(),this.#n=s,this.#s=r,this.#i=void 0,this.#r=new bt,this.#l=!1,this.#c=!1,this.#a=!1,this.#f=void 0,this.#p=new je}client(){return this.#e}_sqlOwner(){return this}storeSql(e){const n=this.#p.alloc();return this.#d({type:"store_sql",sqlId:n,sql:e}).then(()=>{},s=>this._setClosed(s)),new mn(this,n)}_closeSql(e){this.#f===void 0&&this.#d({type:"close_sql",sqlId:e}).then(()=>this.#p.free(e),n=>this._setClosed(n))}_execute(e){return this.#d({type:"execute",stmt:e}).then(n=>n.result)}_batch(e){return this.#d({type:"batch",batch:e}).then(n=>n.result)}_describe(e){return this.#d({type:"describe",sql:e.sql,sqlId:e.sqlId}).then(n=>n.result)}_sequence(e){return this.#d({type:"sequence",sql:e.sql,sqlId:e.sqlId}).then(n=>{})}getAutocommit(){return this.#e._ensureVersion(3,"getAutocommit()"),this.#d({type:"get_autocommit"}).then(e=>e.isAutocommit)}#d(e){return new Promise((n,s)=>{this.#m({type:"pipeline",request:e,responseCallback:n,errorCallback:s})})}_openCursor(e){return new Promise((n,s)=>{this.#m({type:"cursor",batch:e,cursorCallback:n,errorCallback:s})})}_cursorClosed(e){if(e!==this.#o)throw new pe("Cursor was closed, but it was not associated with the stream");this.#o=void 0,Ie(()=>this.#h())}close(){this._setClosed(new D("Stream was manually closed"))}closeGracefully(){this.#c=!0,Ie(()=>this.#h())}get closed(){return this.#f!==void 0||this.#c}_setClosed(e){if(this.#f===void 0){for(this.#f=e,this.#o!==void 0&&this.#o._setClosed(e),this.#e._streamClosed(this);;){const n=this.#r.shift();if(n!==void 0)n.errorCallback(e);else break}(this.#i!==void 0||this.#l)&&!this.#a&&(this.#r.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{},errorCallback:()=>{}}),this.#a=!0,Ie(()=>this.#h()))}}#m(e){if(this.#f!==void 0)throw new ee("Stream is closed",this.#f);if(this.#c)throw new ee("Stream is closing",void 0);this.#r.push(e),Ie(()=>this.#h())}#h(){if(this.#l||this.#o!==void 0)return;if(this.#c&&this.#r.length===0){this._setClosed(new D("Stream was gracefully closed"));return}const e=this.#e._endpoint;if(e===void 0){this.#e._endpointPromise.then(()=>this.#h(),s=>this._setClosed(s));return}const n=this.#r.shift();if(n!==void 0)if(n.type==="pipeline"){const s=[n];for(;;){const r=this.#r.first();if(r!==void 0&&r.type==="pipeline")s.push(r),this.#r.shift();else if(r===void 0&&this.#c&&!this.#a){s.push({type:"pipeline",request:{type:"close"},responseCallback:()=>{},errorCallback:()=>{}}),this.#a=!0;break}else break}this.#u(e,s)}else if(n.type==="cursor")this.#w(e,n);else throw F(n,"Impossible type of QueueEntry")}#u(e,n){this.#y(()=>this.#g(n,e),s=>Bl(s,e.encoding),s=>s.baton,s=>s.baseUrl,s=>Ml(n,s),s=>n.forEach(r=>r.errorCallback(s)))}#w(e,n){const s=new xl(this,e.encoding);this.#o=s,this.#y(()=>this.#_(n,e),r=>s.open(r),r=>r.baton,r=>r.baseUrl,r=>n.cursorCallback(s),r=>n.errorCallback(r))}#y(e,n,s,r,i,o){let l;try{const c=e(),a=this.#s;l=a(c)}catch(c){l=Promise.reject(c)}this.#l=!0,l.then(c=>c.ok?n(c):Dl(c).then(a=>{throw a})).then(c=>{this.#i=s(c),this.#t=r(c)??this.#t,i(c)}).catch(c=>{this._setClosed(c),o(c)}).finally(()=>{this.#l=!1,this.#h()})}#g(e,n){return this.#b(new URL(n.pipelinePath,this.#t),{baton:this.#i,requests:e.map(s=>s.request)},n.encoding,Rl,ql)}#_(e,n){if(n.cursorPath===void 0)throw new ke(`Cursors are supported only on protocol version 3 and higher, but the HTTP server only supports version ${n.version}.`);return this.#b(new URL(n.cursorPath,this.#t),{baton:this.#i,batch:e.batch},n.encoding,vl,Ul)}#b(e,n,s,r,i){let o,l;if(s==="json")o=Is(n,r),l="application/json";else if(s==="protobuf")o=Es(n,i),l="application/x-protobuf";else throw F(s,"Impossible encoding");const c=new cl;return c.set("content-type",l),this.#n!==void 0&&c.set("authorization",`Bearer ${this.#n}`),new Ys(e.toString(),{method:"POST",headers:c,body:o})}}function Ml(t,e){if(e.results.length!==t.length)throw new q("Server returned unexpected number of pipeline results");for(let n=0;n<t.length;++n){const s=e.results[n],r=t[n];if(s.type==="ok"){if(s.response.type!==r.request.type)throw new q("Received unexpected type of response");r.responseCallback(s.response)}else if(s.type==="error")r.errorCallback(Pe(s.error));else throw s.type==="none"?new q("Received unrecognized type of StreamResult"):F(s,"Received impossible type of StreamResult")}}async function Bl(t,e){if(e==="json"){const n=await t.json();return hn(n,ul)}if(e==="protobuf"){const n=await t.arrayBuffer();return qt(new Uint8Array(n),pl)}throw await t.body?.cancel(),F(e,"Impossible encoding")}async function Dl(t){const e=t.headers.get("content-type")??"text/plain";let n=`Server returned HTTP status ${t.status}`;if(e==="application/json"){const s=await t.json();return"message"in s?Pe(s):new ut(n,t.status)}if(e==="text/plain"){const s=(await t.text()).trim();return s!==""&&(n+=`: ${s}`),new ut(n,t.status)}return await t.body?.cancel(),new ut(n,t.status)}const jl=[{versionPath:"v3-protobuf",pipelinePath:"v3-protobuf/pipeline",cursorPath:"v3-protobuf/cursor",version:3,encoding:"protobuf"}],en={versionPath:"v2",pipelinePath:"v2/pipeline",cursorPath:void 0,version:2,encoding:"json"};let Fl=class extends qs{#e;#t;#n;#s;#i;_endpointPromise;_endpoint;constructor(e,n,s,r=2){super(),this.#e=e,this.#t=n,this.#n=s??ll,this.#s=void 0,this.#i=new Set,r==3?(this._endpointPromise=Vl(this.#n,this.#e),this._endpointPromise.then(i=>this._endpoint=i,i=>this.#r(i))):(this._endpointPromise=Promise.resolve(en),this._endpointPromise.then(i=>this._endpoint=i,i=>this.#r(i)))}async getVersion(){return this._endpoint!==void 0?this._endpoint.version:(await this._endpointPromise).version}_ensureVersion(e,n){if(!(e<=en.version)){if(this._endpoint===void 0)throw new ke(`${n} is supported only on protocol version ${e} and higher, but the version supported by the HTTP server is not yet known. Use Client.getVersion() to wait until the version is available.`);if(this._endpoint.version<e)throw new ke(`${n} is supported only on protocol version ${e} and higher, but the HTTP server only supports version ${this._endpoint.version}.`)}}openStream(){if(this.#s!==void 0)throw new ee("Client is closed",this.#s);const e=new Nl(this,this.#e,this.#t,this.#n);return this.#i.add(e),e}_streamClosed(e){this.#i.delete(e)}close(){this.#r(new D("Client was manually closed"))}get closed(){return this.#s!==void 0}#r(e){if(this.#s===void 0){this.#s=e;for(const n of Array.from(this.#i))n._setClosed(new ee("Client was closed",e))}}};async function Vl(t,e){const n=t;for(const s of jl){const r=new URL(s.versionPath,e),i=new Ys(r.toString(),{method:"GET"}),o=await n(i);if(await o.arrayBuffer(),o.ok)return s}return en}function Zs(t,e,n=2){if(typeof $e>"u")throw new $s("WebSockets are not supported in this environment");var s=void 0;n==3?s=Array.from(Qs.keys()):s=Array.from(il.keys());const r=new $e(t,s);return new ol(r,e)}function Hl(t,e,n,s=2){return new Fl(t instanceof URL?t:new URL(t),e,n,s)}class Xs{#e;#t;#n;constructor(e,n){this.#e=e,this.#t=n,this.#n=void 0}execute(e){return this.batch([e]).then(n=>n[0])}async batch(e){const n=this._getStream();if(n.closed)throw new L("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{const s=e.map(xe);let r;if(this.#n===void 0){this._getSqlCache().apply(s);const o=n.batch(this.#t>=3),l=o.step(),c=l.run(zt(this.#e));let a=l;r=s.map(u=>{const f=o.step().condition(K.ok(a));this.#t>=3&&f.condition(K.not(K.isAutocommit(o)));const d=f.query(u);return d.catch(()=>{}),a=f,d}),this.#n=o.execute().then(()=>c).then(()=>{});try{await this.#n}catch(u){throw this.close(),u}}else{this.#t<3&&await this.#n,this._getSqlCache().apply(s);const o=n.batch(this.#t>=3);let l;r=s.map(c=>{const a=o.step();l!==void 0&&a.condition(K.ok(l)),this.#t>=3&&a.condition(K.not(K.isAutocommit(o)));const u=a.query(c);return u.catch(()=>{}),l=a,u}),await o.execute()}const i=[];for(const o of r){const l=await o;if(l===void 0)throw new L("Statement in a transaction was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");i.push($t(l))}return i}catch(s){throw j(s)}}async executeMultiple(e){const n=this._getStream();if(n.closed)throw new L("Cannot execute statements because the transaction is closed","TRANSACTION_CLOSED");try{if(this.#n===void 0){this.#n=n.run(zt(this.#e)).then(()=>{});try{await this.#n}catch(s){throw this.close(),s}}else await this.#n;await n.sequence(e)}catch(s){throw j(s)}}async rollback(){try{const e=this._getStream();if(e.closed||this.#n===void 0)return;const n=e.run("ROLLBACK").catch(s=>{throw j(s)});e.closeGracefully(),await n}catch(e){throw j(e)}finally{this.close()}}async commit(){try{const e=this._getStream();if(e.closed)throw new L("Cannot commit the transaction because it is already closed","TRANSACTION_CLOSED");if(this.#n!==void 0)await this.#n;else return;const n=e.run("COMMIT").catch(s=>{throw j(s)});e.closeGracefully(),await n}catch(e){throw j(e)}finally{this.close()}}}async function xt(t,e,n,s,r=!1){r&&n.step().run("PRAGMA foreign_keys=off");const i=n.step(),o=i.run(zt(t));let l=i;const c=s.map(h=>{const m=n.step().condition(K.ok(l));e>=3&&m.condition(K.not(K.isAutocommit(n)));const p=m.query(h);return l=m,p}),a=n.step().condition(K.ok(l));e>=3&&a.condition(K.not(K.isAutocommit(n)));const u=a.run("COMMIT");n.step().condition(K.not(K.ok(a))).run("ROLLBACK").catch(h=>{}),r&&n.step().run("PRAGMA foreign_keys=on"),await n.execute();const d=[];await o;for(const h of c){const m=await h;if(m===void 0)throw new L("Statement in a batch was not executed, probably because the transaction has been rolled back","TRANSACTION_CLOSED");d.push($t(m))}return await u,d}function xe(t){if(typeof t=="string")return new Zt(t);const e=new Zt(t.sql);if(Array.isArray(t.args))e.bindIndexes(t.args);else for(const[n,s]of Object.entries(t.args))e.bindName(n,s);return e}function $t(t){const e=t.columnNames.map(o=>o??""),n=t.columnDecltypes.map(o=>o??""),s=t.rows,r=t.affectedRowCount,i=t.lastInsertRowid!==void 0?t.lastInsertRowid:void 0;return new Zi(e,n,s,r,i)}function j(t){if(t instanceof D){const e=er(t);return new L(t.message,e,void 0,t)}return t}function er(t){return t instanceof As&&t.code!==void 0?t.code:t instanceof q?"HRANA_PROTO_ERROR":t instanceof ee?t.cause instanceof D?er(t.cause):"HRANA_CLOSED_ERROR":t instanceof Kt?"HRANA_WEBSOCKET_ERROR":t instanceof ut?"SERVER_ERROR":t instanceof ke?"PROTOCOL_VERSION_ERROR":t instanceof pe?"INTERNAL_ERROR":"UNKNOWN"}class Sn{#e;#t;capacity;constructor(e,n){this.#e=e,this.#t=new Wl,this.capacity=n}apply(e){if(this.capacity<=0)return;const n=new Set;for(const s of e){if(typeof s.sql!="string")continue;const r=s.sql;if(r.length>=5e3)continue;let i=this.#t.get(r);if(i===void 0){for(;this.#t.size+1>this.capacity;){const[o,l]=this.#t.peekLru();if(n.has(l))break;l.close(),this.#t.delete(o)}this.#t.size+1<=this.capacity&&(i=this.#e.storeSql(r),this.#t.set(r,i))}i!==void 0&&(s.sql=i,n.add(i))}}}class Wl{#e;constructor(){this.#e=new Map}get(e){const n=this.#e.get(e);return n!==void 0&&(this.#e.delete(e),this.#e.set(e,n)),n}set(e,n){this.#e.set(e,n)}peekLru(){for(const e of this.#e.entries())return e}delete(e){this.#e.delete(e)}get size(){return this.#e.size}}function Jl(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lt,Vn;function zl(){if(Vn)return Lt;Vn=1;function t(s){var r=0,i=[];function o(){r--,r<s&&l()}function l(){var f=i.shift();u.queue=i.length,f&&a(f.fn).then(f.resolve).catch(f.reject)}function c(f){return new Promise(function(d,h){i.push({fn:f,resolve:d,reject:h}),u.queue=i.length})}function a(f){r++;try{return Promise.resolve(f()).then(function(d){return o(),d},function(d){throw o(),d})}catch(d){return o(),Promise.reject(d)}}var u=function(f){return r>=s?c(f):a(f)};return u}function e(s,r){var i=!1,o=this;return Promise.all(s.map(function(){var l=arguments;return o(function(){if(!i)return r.apply(void 0,l).catch(function(c){throw i=!0,c})})}))}function n(s){return s.queue=0,s.map=e,s}return Lt=function(s){return n(s?t(s):function(r){return r()})},Lt}var Kl=zl();const tr=Jl(Kl);function Gl(t){if(t.scheme!=="wss"&&t.scheme!=="ws")throw new L(`The WebSocket client supports only "libsql:", "wss:" and "ws:" URLs, got ${JSON.stringify(t.scheme+":")}. For more information, please read ${Qe}`,"URL_SCHEME_NOT_SUPPORTED");if(t.encryptionKey!==void 0)throw new L("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if(t.scheme==="ws"&&t.tls)throw new L('A "ws:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");if(t.scheme==="wss"&&!t.tls)throw new L('A "wss:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");const e=Ht(t.scheme,t.authority,t.path);let n;try{n=Zs(e,t.authToken)}catch(s){if(s instanceof $s){const r=t.scheme==="wss"?"https":"http",i=Ht(r,t.authority,t.path);throw new L(`This environment does not support WebSockets, please switch to the HTTP client by using a "${r}:" URL (${JSON.stringify(i)}). For more information, please read ${Qe}`,"WEBSOCKETS_NOT_SUPPORTED")}throw j(s)}return new Zl(n,e,t.authToken,t.intMode,t.concurrency)}const Ql=60*1e3,Yl=100;class Zl{#e;#t;#n;#s;#i;closed;protocol;#r;#l;constructor(e,n,s,r,i){this.#e=n,this.#t=s,this.#n=r,this.#s=this.#c(e),this.#i=void 0,this.closed=!1,this.protocol="ws",this.#l=tr(i)}async limit(e){return this.#l(e)}async execute(e,n){let s;return typeof e=="string"?s={sql:e,args:n||[]}:s=e,this.limit(async()=>{const r=await this.#o();try{const i=xe(s);r.conn.sqlCache.apply([i]);const o=r.stream.query(i);r.stream.closeGracefully();const l=await o;return $t(l)}catch(i){throw j(i)}finally{this._closeStream(r)}})}async batch(e,n="deferred"){return this.limit(async()=>{const s=await this.#o();try{const r=e.map(xe),i=await s.conn.client.getVersion();s.conn.sqlCache.apply(r);const o=s.stream.batch(i>=3);return await xt(n,i,o,r)}catch(r){throw j(r)}finally{this._closeStream(s)}})}async migrate(e){return this.limit(async()=>{const n=await this.#o();try{const s=e.map(xe),r=await n.conn.client.getVersion(),i=n.stream.batch(r>=3);return await xt("deferred",r,i,s,!0)}catch(s){throw j(s)}finally{this._closeStream(n)}})}async transaction(e="write"){return this.limit(async()=>{const n=await this.#o();try{const s=await n.conn.client.getVersion();return new Xl(this,n,e,s)}catch(s){throw this._closeStream(n),j(s)}})}async executeMultiple(e){return this.limit(async()=>{const n=await this.#o();try{const s=n.stream.sequence(e);n.stream.closeGracefully(),await s}catch(s){throw j(s)}finally{this._closeStream(n)}})}sync(){throw new L("sync not supported in ws mode","SYNC_NOT_SUPPORTED")}async#o(){if(this.closed)throw new L("The client is closed","CLIENT_CLOSED");if(new Date().valueOf()-this.#s.openTime.valueOf()>Ql&&this.#i===void 0){const r=this.#c();this.#i=r,r.client.getVersion().then(i=>{this.#s!==r&&this.#s.streamStates.size===0&&this.#s.client.close(),this.#s=r,this.#i=void 0},i=>{this.#i=void 0})}if(this.#s.client.closed)try{this.#i!==void 0?this.#s=this.#i:this.#s=this.#c()}catch(r){throw j(r)}const s=this.#s;try{s.useSqlCache===void 0&&(s.useSqlCache=await s.client.getVersion()>=2,s.useSqlCache&&(s.sqlCache.capacity=Yl));const r=s.client.openStream();r.intMode=this.#n;const i={conn:s,stream:r};return s.streamStates.add(i),i}catch(r){throw j(r)}}#c(e){try{return e??=Zs(this.#e,this.#t),{client:e,useSqlCache:void 0,sqlCache:new Sn(e,0),openTime:new Date,streamStates:new Set}}catch(n){throw j(n)}}_closeStream(e){e.stream.close();const n=e.conn;n.streamStates.delete(e),n.streamStates.size===0&&n!==this.#s&&n.client.close()}close(){this.#s.client.close(),this.closed=!0}}class Xl extends Xs{#e;#t;constructor(e,n,s,r){super(s,r),this.#e=e,this.#t=n}_getStream(){return this.#t.stream}_getSqlCache(){return this.#t.conn.sqlCache}close(){this.#e._closeStream(this.#t)}get closed(){return this.#t.stream.closed}}function ec(t){if(t.scheme!=="https"&&t.scheme!=="http")throw new L(`The HTTP client supports only "libsql:", "https:" and "http:" URLs, got ${JSON.stringify(t.scheme+":")}. For more information, please read ${Qe}`,"URL_SCHEME_NOT_SUPPORTED");if(t.encryptionKey!==void 0)throw new L("Encryption key is not supported by the remote client.","ENCRYPTION_KEY_NOT_SUPPORTED");if(t.scheme==="http"&&t.tls)throw new L('A "http:" URL cannot opt into TLS by using ?tls=1',"URL_INVALID");if(t.scheme==="https"&&!t.tls)throw new L('A "https:" URL cannot opt out of TLS by using ?tls=0',"URL_INVALID");const e=Ht(t.scheme,t.authority,t.path);return new tc(e,t.authToken,t.intMode,t.fetch,t.concurrency)}const nr=30;class tc{#e;protocol;#t;#n;constructor(e,n,s,r,i){this.#e=Hl(e,n,r),this.#e.intMode=s,this.protocol="http",this.#t=n,this.#n=tr(i)}async limit(e){return this.#n(e)}async execute(e,n){let s;return typeof e=="string"?s={sql:e,args:n||[]}:s=e,this.limit(async()=>{try{const r=xe(s);let i;const o=this.#e.openStream();try{i=o.query(r)}finally{o.closeGracefully()}const l=await i;return $t(l)}catch(r){throw j(r)}})}async batch(e,n="deferred"){return this.limit(async()=>{try{const s=e.map(xe),r=await this.#e.getVersion();let i;const o=this.#e.openStream();try{new Sn(o,nr).apply(s);const a=o.batch(!1);i=xt(n,r,a,s)}finally{o.closeGracefully()}return await i}catch(s){throw j(s)}})}async migrate(e){return this.limit(async()=>{try{const n=e.map(xe),s=await this.#e.getVersion();let r;const i=this.#e.openStream();try{const l=i.batch(!1);r=xt("deferred",s,l,n,!0)}finally{i.closeGracefully()}return await r}catch(n){throw j(n)}})}async transaction(e="write"){return this.limit(async()=>{try{const n=await this.#e.getVersion();return new nc(this.#e.openStream(),e,n)}catch(n){throw j(n)}})}async executeMultiple(e){return this.limit(async()=>{try{let n;const s=this.#e.openStream();try{n=s.sequence(e)}finally{s.closeGracefully()}await n}catch(n){throw j(n)}})}sync(){throw new L("sync not supported in http mode","SYNC_NOT_SUPPORTED")}close(){this.#e.close()}get closed(){return this.#e.closed}}class nc extends Xs{#e;#t;constructor(e,n,s){super(n,s),this.#e=e,this.#t=new Sn(e,nr)}_getStream(){return this.#e}_getSqlCache(){return this.#t}close(){this.#e.close()}get closed(){return this.#e.closed}}function sc(t){return rc(to(t))}function rc(t){if(t.scheme==="ws"||t.scheme==="wss")return Gl(t);if(t.scheme==="http"||t.scheme==="https")return ec(t);throw new L(`The client that uses Web standard APIs supports only "libsql:", "wss:", "ws:", "https:" and "http:" URLs, got ${JSON.stringify(t.scheme+":")}. For more information, please read ${Qe}`,"URL_SCHEME_NOT_SUPPORTED")}const ic="libsql://llm-responses-ejx537.turso.io",oc="eyJhbGciOiJFZERTQSIsInR5cCI6IkpXVCJ9.eyJhIjoicm8iLCJnaWQiOiJjYWI5NDJiOS1lMzkxLTRmMzktOGVlYi03YTRiOTJiMTY4ZWUiLCJpYXQiOjE3NDEyMjQ3NzF9.fXGJ85LOM7lEImaR3fYE_-Q7hVB9ksgnwRooRbO7_4Jw6IHBQhZPnOHV0mdjKm9vnsmKKOd8tybRjoc8rJqCDA",et=sc({url:ic,authToken:oc});console.log("turso",et);function Hn(t,e={}){const n=e.storage||globalThis.localStorage,s=e.name||`storage-${Er()}`;if(!n)return[t[0],t[1],null];const r=e.storageOptions,i=e.serialize||JSON.stringify.bind(JSON),o=e.deserialize||JSON.parse.bind(JSON),l=n.getItem(s,r),c=typeof t[0]=="function"?u=>{try{const f=o(u);t[1](()=>f)}catch{}}:u=>{try{const f=o(u);t[1]($i(f))}catch{}};let a=!0;if(l instanceof Promise?l.then(u=>a&&u&&c(u)):l&&c(l),typeof e.sync?.[0]=="function"){const u=typeof t[0]=="function"?t[0]:()=>t[0];e.sync[0](f=>{f.key!==s||(f.url||globalThis.location.href)!==globalThis.location.href||f.newValue===i(H(u))||c(f.newValue)})}return[t[0],typeof t[0]=="function"?u=>{const f=t[1](u),d=u!=null?i(f):u;return e.sync?.[1](s,d),d!=null?n.setItem(s,d,r):n.removeItem(s,r),a=!1,f}:(...u)=>{t[1](...u);const f=i(H(()=>t[0]));e.sync?.[1](s,f),n.setItem(s,f,r),a=!1},l]}var lc=k('<div class="px-4 py-2 text-amber-600 font-medium">Maximum <!> items can be selected'),cc=k('<div class="px-4 py-2 text-gray-500">No options found'),ac=k('<div class="absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded shadow-lg max-h-60 overflow-y-auto">'),uc=k('<div class="relative w-full"><div class="flex flex-wrap items-center min-h-10 p-2 border border-gray-300 rounded bg-white cursor-text"><input type=text class="flex-grow outline-none text-sm min-w-20">'),fc=k('<div class="flex items-center bg-blue-100 text-blue-800 text-sm font-medium mr-2 mb-1 px-2 py-1 rounded"><button type=button class="ml-1 text-blue-600 hover:text-blue-800 focus:outline-none">&times;'),dc=k('<div><div class="flex items-center"><input type=checkbox class=mr-2>');const Wn=t=>{const{options:e=[],placeholder:n="Select options...",onChange:s=()=>{},initialSelected:r=[],maxSelections:i=1/0}=t,[o,l]=M(r),[c,a]=M(!1),[u,f]=M(""),[d,h]=M(e);let m,p;Je(()=>{u()===""?h(e):h(e.filter(S=>S.label.toLowerCase().includes(u().toLowerCase())))}),Je(()=>{s(o())}),br(()=>{const S=C=>{m&&!m.contains(C.target)&&c()&&a(!1)};return document.addEventListener("mousedown",S),()=>{document.removeEventListener("mousedown",S)}});const w=S=>{const C=o();if(C.some(U=>U.value===S.value))l(C.filter(U=>U.value!==S.value));else if(C.length<i){const U=[...C,S];l(U),U.length>=i&&(a(!1),f(""))}},x=(S,C)=>{C.stopPropagation(),l(o().filter(v=>v.value!==S.value))},y=S=>{S.key==="Escape"&&a(!1)};return(()=>{var S=uc(),C=S.firstChild,v=C.firstChild,U=m;typeof U=="function"?Bt(U,S):m=S,C.$$click=()=>{a(!0),p?.focus()},_(C,g(he,{get each(){return o()},children:N=>(()=>{var A=fc(),b=A.firstChild;return _(A,()=>N.label,b),b.$$click=R=>x(N,R),A})()}),v),v.addEventListener("focus",()=>a(!0)),v.$$keydown=y,v.$$input=N=>f(N.currentTarget.value);var Q=p;return typeof Q=="function"?Bt(Q,v):p=v,_(S,g(Y,{get when(){return c()},get children(){var N=ac();return _(N,g(Y,{get when(){return o().length>=i},get children(){var A=lc(),b=A.firstChild,R=b.nextSibling;return R.nextSibling,_(A,i,R),A}}),null),_(N,g(Y,{get when(){return d().length===0},get children(){return cc()}}),null),_(N,g(he,{get each(){return d()},children:A=>{const b=()=>o().some(B=>B.value===A.value),R=()=>o().length>=i&&!b();return(()=>{var B=dc(),ue=B.firstChild,I=ue.firstChild;return B.$$click=()=>!R()&&w(A),I.addEventListener("change",()=>{}),_(ue,()=>A.label,null),G($=>{var V=`px-4 py-2 cursor-pointer hover:bg-gray-100 
                                    ${b()?"bg-blue-50":""}
                                    ${R()?"opacity-50 cursor-not-allowed":""}`,te=R();return V!==$.e&&yt(B,$.e=V),te!==$.t&&(I.disabled=$.t=te),$},{e:void 0,t:void 0}),G(()=>I.checked=b()),B})()}}),null),N}}),null),G(N=>{var A=o().length===0?n:o().length>=i?`Maximum ${i} items selected`:"",b=o().length>=i;return A!==N.e&&mt(v,"placeholder",N.e=A),b!==N.t&&(v.disabled=N.t=b),N},{e:void 0,t:void 0}),G(()=>v.value=u()),S})()};on(["click","input","keydown"]);var hc=k('<article class="rounded-xl border border-gray-700 bg-gray-800 p-4"><div class="flex items-center gap-4"><div><h3 class="text-xl font-medium text-white"></h3><div class="flow-root font-medium text-gray-300"></div></div></div><ul class="mt-4 space-y-2">'),pc=k('<li class="block h-full rounded-lg border border-gray-700 p-4 hover:border-pink-600 select-text cursor-pointer"><strong class="font-medium text-white">'),mc=k('<h3 class="text-xl font-medium text-white justify-between items-center flex"><span></span><button class=btn>Example'),yc=k('<div class="text-sm text-gray-300 mb-2">'),wc=k('<div class="flex flex-col rounded-xl border border-gray-700 bg-gray-800 p-4 gap-2">'),bc=k('<div class="flex flex-col w-full h-full bg-gray-800 top-0 left-0 gap-2"><h3 class="text-xl font-medium text-white justify-between items-center flex"><span> Examples:</span><button class=btn>Close'),gc=k('<div class="collapse collapse-arrow border border-base-300 bg-gray-700"><input type=checkbox><div class="collapse-title font-semibold text-white"></div><div class="collapse-content text-sm text-gray-300"><div></div><div>'),_c=k("<div class=text-amber-400>Loading principles data..."),Sc=k('<div class="collapse collapse-arrow border border-base-300 bg-gray-700"><input type=checkbox><div class="collapse-title font-semibold text-white"></div><div class="collapse-content text-sm text-gray-300">'),Jn=k('<div class="grid grid-cols-1 gap-4 lg:grid-cols-3 lg:gap-8">'),xc=k("<button class=btn>Show Results"),Rc=k('<div class="grid grid-cols-1 gap-4">'),Cc=k('<div class="flex flex-col w-full p-12 h-full text-base-200 gap-4"><div class="flex items-center gap-4"><h1 class="text-2xl font-bold text-gray-900 sm:text-3xl mr-auto">LLLM Ethical Alignment</h1><div class="join grid grid-cols-2 rounded-md bg-base-200 text-white"><button></button><button></button></div></div><p class="mt-1.5 text-sm text-gray-500">:'),vc=k("<div>Loading all the preset Scenarios"),zn=k("<div>No scenario found"),qc=k("<div>Loading LLM results..."),Ac=k("<div>No models found"),$c=k('<div class="rounded-xl border border-gray-700 bg-gray-800 p-4"><div class="text-xl font-medium text-white mb-4">Model: </div><div class=space-y-4><div class=text-gray-300><div class="font-medium text-white mb-2">Selected Action:</div><div class=pl-4></div></div><div class=text-gray-300><div class="font-medium text-white mb-2">Justification:'),Ic=k('<div class=space-y-4><div class=pl-4><div class="text-white font-medium">Reasoning:</div><ul class="list-disc pl-8 space-y-2"></ul></div><div class=pl-4><div class="text-white font-medium">Ethical Analysis:</div><ul class="list-disc pl-8 space-y-2"></ul></div><div class=pl-4><div class="text-white font-medium">Guidelines Alignment:</div><ul class="list-disc pl-8 space-y-2"></ul></div><div class=pl-4><div class="text-white font-medium">Impact Assessment:</div><ul class="list-disc pl-8 space-y-2">'),ot=k("<li>"),Ec=k("<div class=pl-4>");const Oc=t=>(()=>{var e=hc(),n=e.firstChild,s=n.firstChild,r=s.firstChild,i=r.nextSibling,o=n.nextSibling;return _(r,()=>t.scenario.name.charAt(0).toUpperCase()+t.scenario.name.slice(1)),_(i,()=>t.scenario.scenario),_(o,g(he,{get each(){return t.scenario.possible_actions},children:l=>(()=>{var c=pc(),a=c.firstChild;return _(a,l),c})()})),e})(),kc=t=>{const[e,n]=M(!1);return(()=>{var s=wc();return _(s,g(Y,{get when(){return!e()},get fallback(){return(()=>{var r=bc(),i=r.firstChild,o=i.firstChild,l=o.firstChild,c=o.nextSibling;return _(o,()=>t.ethicalFramework.name,l),Ee(c,"click",()=>n(!1)),_(r,g(he,{get each(){return t.ethicalFramework.examples},children:a=>(()=>{var u=gc(),f=u.firstChild,d=f.nextSibling,h=d.nextSibling,m=h.firstChild,p=m.nextSibling;return _(d,()=>a.scenario),_(m,()=>a.action),_(p,()=>a.justification),u})()}),null),r})()},get children(){return[(()=>{var r=mc(),i=r.firstChild,o=i.nextSibling;return _(i,()=>t.ethicalFramework.name),Ee(o,"click",()=>n(!0)),r})(),(()=>{var r=yc();return _(r,()=>t.ethicalFramework.description),r})(),g(Y,{get when(){return t.ethicalFramework.principles&&typeof t.ethicalFramework.principles=="object"},get fallback(){return _c()},get children(){return g(he,{get each(){return Object.entries(t.ethicalFramework.principles)},children:([r,i])=>(()=>{var o=Sc(),l=o.firstChild,c=l.nextSibling,a=c.nextSibling;return _(c,r),_(a,i),o})()})}})]}})),s})()},Pc=async()=>{try{return(await et.execute(`
          SELECT id, name, scenario, possible_actions
          FROM scenarios
          ORDER BY name
        `)).rows.map(e=>({id:e.id,name:e.name,scenario:e.scenario,possible_actions:JSON.parse(e.possible_actions)}))}catch(t){return console.error("Error fetching scenarios",t),[]}},Lc=async()=>{try{return(await et.execute(`
          SELECT id, name, description, principles, examples
          FROM ethical_frameworks
          ORDER BY name
        `)).rows.map(e=>{let n={},s=[];try{n=JSON.parse(e.principles||"{}"),s=JSON.parse(e.examples||"[]")}catch(r){console.error("Error parsing principles or examples:",r)}return{id:e.id,name:e.name,description:e.description,principles:n,examples:s}})}catch(t){return console.error("Error fetching ethical frameworks",t),[]}},Tc=async()=>{try{return(await et.execute(`
          SELECT DISTINCT model
          FROM responses
          ORDER BY model
        `)).rows.map(e=>e.model)}catch(t){return console.error("Error fetching available models",t),[]}},Uc=async(t,e=[])=>{if(!t||e.length===0)return[];try{const s=`
            SELECT DISTINCT
                r.id,
                r.scenario_id,
                r.model,
                r.selected_action,
                r.justification,
                r.created_at,
                rf.framework_id as ethical_framework_id
            FROM responses r
            LEFT JOIN response_frameworks rf ON r.id = rf.response_id
            WHERE r.scenario_id = ?
            AND r.model IN (${e.map(()=>"?").join(",")})
            ORDER BY r.model, rf.framework_id
        `,r=await et.execute({sql:s,args:[t,...e]}),i=new Map;return r.rows.forEach(o=>{const l=`${o.model}-${o.selected_action}`;i.has(l)||i.set(l,{id:o.id,scenario_id:o.scenario_id,ethical_framework_id:o.ethical_framework_id,result:o.result,model:o.model,selected_action:o.selected_action,justification:o.justification})}),Array.from(i.values())}catch(n){return console.error("Error fetching LLM results",n),[]}},Nc=()=>{const[t,e]=Hn(M([]),{name:"scenarios",storage:localStorage}),[n]=vn(Tc),[s,r]=Hn(M([]),{name:"ethicalFrameworks",storage:localStorage}),[i,o]=M(!0),[l,c]=M(1),[a,u]=M(),[f,d]=M([]),[h,m]=M(!1),[p,{mutate:w,refetch:x}]=vn(()=>h()?{scenarioId:a()?.value,modelNames:f().map(y=>y.value)}:null,y=>y?Uc(y.scenarioId,y.modelNames):[]);return Je(async()=>{if(l()===1){if(t().length>0){o(!1);return}o(!0);try{const y=await Pc();e(y)}catch(y){console.error("Error fetching scenarios",y)}finally{o(!1)}}}),Je(async()=>{if(l()===2){if(s().length>0){o(!1);return}o(!0);try{const y=await Lc();r(y)}catch(y){console.error("Error fetching ethical frameworks",y)}finally{o(!1)}}}),(()=>{var y=Cc(),S=y.firstChild,C=S.firstChild,v=C.nextSibling,U=v.firstChild,Q=U.nextSibling,N=S.nextSibling,A=N.firstChild;return Ee(U,"click",()=>c(l()-1)),_(U,g(st,{get children(){return[g(X,{get when(){return l()===1},children:"None"}),g(X,{get when(){return l()===2},children:"Scenarios"}),g(X,{get when(){return l()===3},children:"Ethical Frameworks"})]}})),Ee(Q,"click",()=>c(l()+1)),_(Q,g(st,{get children(){return[g(X,{get when(){return l()===1},children:"Ethical Frameworks"}),g(X,{get when(){return l()===2},children:"LLM Results"}),g(X,{get when(){return l()===3},children:"None"})]}})),_(N,g(st,{get children(){return[g(X,{get when(){return l()===1},children:"Scenarios"}),g(X,{get when(){return l()===2},children:"Ethical Frameworks"}),g(X,{get when(){return l()===3},children:"LLM Results"})]}}),A),_(y,g(Y,{get when(){return T(()=>l()!==3)()?!i():!0},get fallback(){return vc()},get children(){return g(st,{get children(){return[g(X,{get when(){return l()===1},get children(){var b=Jn();return _(b,g(Y,{get when(){return t().length>0},get fallback(){return zn()},get children(){return g(he,{get each(){return t()},children:R=>Oc({scenario:R})})}})),b}}),g(X,{get when(){return l()===2},get children(){var b=Jn();return _(b,g(Y,{get when(){return s().length>0},get fallback(){return zn()},get children(){return g(he,{get each(){return s()},children:R=>kc({ethicalFramework:R})})}})),b}}),g(X,{get when(){return l()===3},get children(){return g(Y,{get when(){return!n.loading},get fallback(){return qc()},get children(){return g(Y,{get when(){return n()},get fallback(){return Ac()},get children(){return[g(Wn,{maxSelections:1,placeholder:"Select one scenario...",get options(){return t()?.map(b=>({label:b.name,value:b.id}))},onChange:b=>u(b[0])}),g(Wn,{maxSelections:3,placeholder:"Select up to 3 models to compare...",get options(){return n()?.map(b=>({label:b,value:b}))},onChange:d}),(()=>{var b=xc();return Ee(b,"click",()=>m(!0)),G(()=>b.disabled=!a()||f().length===0),b})(),g(Y,{get when(){return T(()=>!p.loading)()&&h()},get children(){var b=Rc();return _(b,g(he,{get each(){return p()},children:R=>(()=>{var B=$c(),ue=B.firstChild;ue.firstChild;var I=ue.nextSibling,$=I.firstChild,V=$.firstChild,te=V.nextSibling,Re=$.nextSibling;return Re.firstChild,_(ue,()=>R.model,null),_(te,()=>R.selected_action),_(Re,()=>{try{const Z=JSON.parse(R.justification);return(()=>{var le=Ic(),fe=le.firstChild,Ce=fe.firstChild,tt=Ce.nextSibling,xn=fe.nextSibling,sr=xn.firstChild,rr=sr.nextSibling,Rn=xn.nextSibling,ir=Rn.firstChild,or=ir.nextSibling,lr=Rn.nextSibling,cr=lr.firstChild,ar=cr.nextSibling;return _(tt,()=>Z.reasoning.map(ye=>(()=>{var ne=ot();return _(ne,ye),ne})())),_(rr,()=>Z.ethical_analysis.map(ye=>(()=>{var ne=ot();return _(ne,ye),ne})())),_(or,()=>Z.guidelines_alignment.map(ye=>(()=>{var ne=ot();return _(ne,ye),ne})())),_(ar,()=>Z.impact_assessment.map(ye=>(()=>{var ne=ot();return _(ne,ye),ne})())),le})()}catch{return(()=>{var le=Ec();return _(le,()=>R.justification),le})()}},null),B})()})),b}})]}})}})}})]}})}}),null),G(b=>{var R=`join-item btn btn-outline w-48 ${l()===1?"btn-disabled":""}`,B=`join-item btn btn-outline w-48 ${l()===3?"btn-disabled":""}`;return R!==b.e&&yt(U,b.e=R),B!==b.t&&yt(Q,b.t=B),b},{e:void 0,t:void 0}),y})()},Mc=document.getElementById("root");Br(()=>g(xi,{root:Ei,get children(){return[g(rt,{path:"/",component:ki}),g(rt,{path:"/llm-results",component:Nc}),g(rt,{path:"/about",component:Pn}),g(rt,{path:"*404",component:Pn})]}}),Mc);
